game.import("extension",function(lib,game,ui,get,ai,_status){return {name:"舰R牌将",content:function (config,pack){
	if(config.jianrjinji){
		for(var i in lib.characterPack['jianrjinji']) {
			if(lib.character[i][4].indexOf("forbidai")<0) lib.character[i][4].push("forbidai");
		};
	};//选项触发内容，原因见config
},precontent:function(jianrjinji){
	if(jianrjinji.enable){
		//武将包
		game.import('character',function(){
			var jianrjinji={
				name:'jianrjinji',//武将包命名（必填）
				connect:true,//该武将包是否可以联机（必填）
		character:{
            "u1405":["female","wu",1,["yuanhang","qianting","danzong","touxichuan","baiyin_skill","new_retuxi","foundtrick","rendeonly2","roundonefire","olniepan","huihejieshu","gaizaochuan","diewulimitai","wulidebuff","qianghuachuan"],["des:无需隐匿的偷袭大师，马上就让对手的后勤捉襟见肘。"]],
            haiwangxing:["female","wu",2,["yuanhang","qingxuncl","bagua_skill","danzong","fangkoganning","zhangba_skill","qingnang","huihejieshu","gaizaochuan","diewulimitai","wulidebuff","qianghuachuan"],["des:阻敌计谋表现优秀，这是先发制敌的优势所在，"]],
            liekexingdun:["female","shu",4,["hangmucv","yuanhang","zhangba_skill","misscoversha","kanpolimitai","roundonefire","danzong","huihejieshu","gaizaochuan","diewulimitai","wulidebuff","qianghuachuan"],["zhu","des:血量中等的航母，温柔，体贴，过渡期追着大船打的航母。"]],
            chicheng:["female","wei",4,["hangmucv","yuanhang","zhangba_skill","misscoversha","kanpolimitai","roundonefire","danzong","huihejieshu","gaizaochuan","diewulimitai","wulidebuff","qianghuachuan"],["des:大佬友情放出精美壁纸，坚定与自信的姿态"]],
            bisimai:["female","wei",4,["yuanhang","zhanliebb","guanshi_skill","zhuangjiafh","fupaozu","misscoversha","danzong","lingxue","huijiahuihe","huihejieshu","gaizaochuan","diewulimitai","wulidebuff","qianghuachuan"],["zhu","des:更多刮痧，更多力量，更多护甲，更高血量。"]],
            lizhan:["female","wei",3,["zhongxunca","yuanhang","zhuangjiafh","fupaozu","danzong","misscoversha","huijiahuihe","guanshi_skill","zhangba_skill","huihejieshu","gaizaochuan","diewulimitai","wulidebuff","qianghuachuan"],["des:这是个依赖科技的舰船，有着科幻的舰装，与兼备温柔体贴与意气风发的表现。"]],
            xuefeng:["female","shu",2,["yuanhang","quzhudd","rw_bagua_skill","hongyuan","olfengji","rendeonly2","danzong","qigong","zhangba_skill","huihejieshu","gaizaochuan","diewulimitai","wulidebuff","qianghuachuan"],["des:幸运的驱逐舰，多位画师、花了大款的大佬亲情奉献。"]],
            addskilltest:["male","wei",9,["yuanhang","fangkoganning"],["forbidai","des:测试用"]],
            kunxi:["female","wu",3,["zhongxunca","yuanhang","zhuangjiafh","fupaozu","danzong","misscoversha","huijiahuihe","guanshi_skill","zhangba_skill","huihejieshu","gaizaochuan","diewulimitai","wulidebuff","qianghuachuan"],["des:画师优秀的功底让这名角色美而可爱，这是出色的角色塑造。"]],
            misuli:["female","shu",4,["yuanhang","zhanliebb","guanshi_skill","zhuangjiafh","fupaozu","misscoversha","danzong","lingxue","huijiahuihe","huihejieshu","gaizaochuan","diewulimitai","wulidebuff","qianghuachuan"],["des:用精巧的手枪去质疑，用绝对的火力回击对手。"]],
            yixian:["female","wu",2,["yuanhang","qingxuncl","bagua_skill","danzong","fangkoganning","zhangba_skill","qigong","qingnang","huihejieshu","gaizaochuan","diewulimitai","wulidebuff","qianghuachuan"],["des:经典美术设计的款式，意气风发，威猛先生"]],
            "z31":["female","wu",2,["yuanhang","quzhudd","rw_bagua_skill","hongyuan","olfengji","rendeonly2","danzong","zhangba_skill","huihejieshu","gaizaochuan","xshuangren","qigong","kaifa","diewulimitai","wulidebuff","qianghuachuan"],["des:婚纱与轻纱是多数人的美梦,与绿草平原，与绿水青山"]],
            ougengqi:["female","shu",3,["zhongxunca","yuanhang","zhuangjiafh","fupaozu","danzong","misscoversha","huijiahuihe","guanshi_skill","zhangba_skill","huihejieshu","gaizaochuan","diewulimitai","wulidebuff","qianghuachuan"],["des:励志偶像，与标志性舰装，可惜没有适合的图与技能用于无名杀"]],
            kangfusi:["female","wei",2,["yuanhang","quzhudd","rw_bagua_skill","hongyuan","olfengji","rendeonly2","danzong","zhangba_skill","huihejieshu","gaizaochuan","xshuangren","qigong","kaifa","diewulimitai","wulidebuff","qianghuachuan"],["des:水手服欸,优秀的构图，不过图少改造晚。"]],
            rending:["female","wei",2,["yuanhang","qingxuncl","bagua_skill","danzong","fangkoganning","zhangba_skill","huihejieshu","gaizaochuan","diewulimitai","wulidebuff","qianghuachuan"],["des:手持竹伞的轻巡，辅助队友，防御攻击。"]],
            jingjishen:["female","shu",3,["junfu","yuanhang","huihejieshu","gaizaochuan","diewulimitai","wulidebuff","qianghuachuan"],["des:需要武器支援，伙计倒下了。"]],
            changchun:["female","shu",3,["daoqu","roundonefire","yuanhang","huihejieshu","gaizaochuan","diewulimitai","wulidebuff","qianghuachuan"],["des:尚处于正能量之时。"]],
        },
			};
			if(lib.device||lib.node){
				for(var i in jianrjinji.character){jianrjinji.character[i][4].push('ext:舰R牌将/'+i+'.jpg');}
			}else{
				for(var i in jianrjinji.character){jianrjinji.character[i][4].push('db:extension-舰R牌将:'+i+'.jpg');}
			}//由于以此法加入的武将包武将图片是用源文件的，所以要用此法改变路径
			return jianrjinji;
		});
		lib.config.all.characters.push('jianrjinji');
		if(!lib.config.characters.contains('jianrjinji')) lib.config.characters.push('jianrjinji');
		lib.translate['jianrjinji_character_config']='舰R竞技';// 包名翻译
		//卡包（手牌）
		game.import('card',function(){
			var jianrjinjibao={
			name:'jianrjinjibao',//卡包命名
			connect:true,//卡包是否可以联机
        card:{   },
				list:[],//牌堆添加
			}
			return jianrjinjibao
		});
		lib.translate['jianrjinjibao_card_config']='舰R竞技卡包';
		lib.config.all.cards.push('jianrjinjibao');
		if(!lib.config.cards.contains('jianrjinjibao')) lib.config.cards.push('jianrjinjibao');//包名翻译
	};
},help:{},config:{"jianrjinji":{"name":"将舰R竞技内武将设为禁用","init":false}},package:{
    character:{
        character:{
            "u1405":["female","wu",1,["yuanhang","qianting","danzong","touxichuan","baiyin_skill","new_retuxi","foundtrick","rendeonly2","roundonefire","olniepan","huihejieshu","gaizaochuan","diewulimitai","wulidebuff","qianghuachuan"],["des:无需隐匿的偷袭大师，马上就让对手的后勤捉襟见肘。"]],
            haiwangxing:["female","wu",2,["yuanhang","qingxuncl","bagua_skill","danzong","fangkoganning","zhangba_skill","qingnang","huihejieshu","gaizaochuan","diewulimitai","wulidebuff","qianghuachuan"],["des:阻敌计谋表现优秀，这是先发制敌的优势所在，"]],
            liekexingdun:["female","shu",4,["hangmucv","yuanhang","zhangba_skill","misscoversha","kanpolimitai","roundonefire","danzong","huihejieshu","gaizaochuan","diewulimitai","wulidebuff","qianghuachuan"],["zhu","des:血量中等的航母，温柔，体贴，过渡期追着大船打的航母。"]],
            chicheng:["female","wei",4,["hangmucv","yuanhang","zhangba_skill","misscoversha","kanpolimitai","roundonefire","danzong","huihejieshu","gaizaochuan","diewulimitai","wulidebuff","qianghuachuan"],["des:大佬友情放出精美壁纸，坚定与自信的姿态"]],
            bisimai:["female","wei",5,["yuanhang","zhanliebb","guanshi_skill","zhuangjiafh","fupaozu","misscoversha","danzong","lingxue","huijiahuihe","huihejieshu","gaizaochuan","diewulimitai","wulidebuff","qianghuachuan"],["zhu","des:更多刮痧，更多力量，更多护甲，更高血量。"]],
            lizhan:["female","wei",4,["zhongxunca","yuanhang","zhuangjiafh","fupaozu","danzong","misscoversha","huijiahuihe","guanshi_skill","zhangba_skill","huihejieshu","gaizaochuan","diewulimitai","wulidebuff","qianghuachuan"],["des:这是个依赖科技的舰船，有着科幻的舰装，与兼备温柔体贴与意气风发的表现。"]],
            xuefeng:["female","shu",2,["yuanhang","quzhudd","rw_bagua_skill","hongyuan","olfengji","rendeonly2","danzong","qigong","zhangba_skill","huihejieshu","gaizaochuan","diewulimitai","wulidebuff","qianghuachuan"],["des:幸运的驱逐舰，多位画师、花了大款的大佬亲情奉献。"]],
            addskilltest:["male","wei",9,["yuanhang","fangkoganning"],["forbidai","des:测试用"]],
            kunxi:["female","wu",4,["zhongxunca","yuanhang","zhuangjiafh","fupaozu","danzong","misscoversha","huijiahuihe","guanshi_skill","zhangba_skill","huihejieshu","gaizaochuan","diewulimitai","wulidebuff","qianghuachuan"],["des:画师优秀的功底让这名角色美而可爱，这是出色的角色塑造。"]],
            misuli:["female","shu",5,["yuanhang","zhanliebb","guanshi_skill","zhuangjiafh","fupaozu","misscoversha","danzong","lingxue","huijiahuihe","huihejieshu","gaizaochuan","diewulimitai","wulidebuff","qianghuachuan"],["des:用精巧的手枪去质疑，用绝对的火力回击对手。"]],
            yixian:["female","wu",2,["yuanhang","qingxuncl","bagua_skill","danzong","fangkoganning","zhangba_skill","qingnang","huihejieshu","gaizaochuan","diewulimitai","wulidebuff","qianghuachuan"],["des:经典美术设计的款式，意气风发，威猛先生"]],
            "z31":["female","wu",2,["yuanhang","quzhudd","rw_bagua_skill","hongyuan","olfengji","rendeonly2","danzong","zhangba_skill","huihejieshu","gaizaochuan","xshuangren","qigong","kaifa","diewulimitai","wulidebuff","qianghuachuan"],["des:婚纱与轻纱是多数人的美梦,与绿草平原，与绿水青山"]],
            ougengqi:["female","shu",4,["zhongxunca","yuanhang","zhuangjiafh","fupaozu","danzong","misscoversha","huijiahuihe","guanshi_skill","zhangba_skill","huihejieshu","gaizaochuan","diewulimitai","wulidebuff","qianghuachuan"],["des:励志偶像，与标志性舰装，可惜没有适合的图与技能用于无名杀"]],
            kangfusi:["female","wei",2,["yuanhang","quzhudd","rw_bagua_skill","hongyuan","olfengji","rendeonly2","danzong","zhangba_skill","huihejieshu","gaizaochuan","xshuangren","qigong","kaifa","diewulimitai","wulidebuff","qianghuachuan"],["des:水手服欸,优秀的构图，不过图少改造晚。"]],
            rending:["female","wei",2,["yuanhang","qingxuncl","bagua_skill","danzong","fangkoganning","zhangba_skill","huihejieshu","gaizaochuan","diewulimitai","wulidebuff","qianghuachuan"],["des:手持竹伞的轻巡，辅助队友，防御攻击。"]],
            jingjishen:["female","shu",3,["junfu","yuanhang","huihejieshu","gaizaochuan","diewulimitai","wulidebuff","qianghuachuan"],["des:需要武器支援，伙计倒下了。"]],
            changchun:["female","shu",3,["daoqu","roundonefire","yuanhang","huihejieshu","gaizaochuan","diewulimitai","wulidebuff","qianghuachuan"],["des:尚处于正能量之时。"]],
        },
        translate:{
            "u1405":"u1405",
            haiwangxing:"海王星轻巡",
            liekexingdun:"列克星敦",
            chicheng:"赤城航母",
            bisimai:"俾斯麦&北宅",
            lizhan:"历战重巡",
            xuefeng:"雪风驱逐",
            addskilltest:"addskilltest",
            kunxi:"昆西重巡",
            misuli:"密苏里战列",
            yixian:"逸仙轻巡",
            "z31":"z31驱逐",
            ougengqi:"欧根重巡",
            kangfusi:"康弗斯驱逐",
            rending:"仁淀轻巡",
            jingjishen:"竞技神",
            changchun:"长春",
        },
    },
    card:{
        jinjuzy:{
            audio:true,
            type:"trick",
            enable:true,
            selectTarget:-1,
            reverseOrder:true,
            "yingbian_prompt":"当你使用此牌选择目标后，你可为此牌减少一个目标",
            "yingbian_tags":["remove"],
            yingbian:function(event){
        event.yingbian_removeTarget=true;
    },
            filterTarget:function(card,player,target){
        return target!=player.isfriendsOf(player);
    },
            content:function(){
        "step 0"
        if(typeof event.baseDamage!='number') event.baseDamage=1;
        if(event.directHit) event._result={bool:false};
        else{
            var next=target.chooseToRespond({name:'shan'});
            next.set('ai',function(card){
                var evt=_status.event.getParent();
                if(get.damageEffect(evt.target,evt.player,evt.target)>=0) return 0;
                if(evt.player.hasSkillTag('notricksource')) return 0;
                if(evt.target.hasSkillTag('notrick')) return 0;
                if(evt.target.hasSkillTag('noShan')){
                    return -1;
                }
            return get.order(card);
            });
            next.autochoose=lib.filter.autoRespondShan;
        }
        "step 1"
        if(result.bool==false){
            target.damage(event.baseDamage);
        }
    },
            ai:{
                wuxie:function(target,card,player,viewer){
            if(get.attitude(viewer,target)>0&&target.countCards('h','shan')){
                if(!target.countCards('h')||target.hp==1||Math.random()<0.7) return 0;
            }
        },
                basic:{
                    order:9,
                    useful:1,
                    value:5,
                },
                result:{
                    "target_use":function(player,target){
                if(player.hasUnknown(2)&&get.mode()!='guozhan') return 0;
                var nh=target.countCards('h');
                if(get.mode()=='identity'){
                    if(target.isZhu&&nh<=2&&target.hp<=1) return -100;
                }
                if(nh==0) return -2;
                if(nh==1) return -1.7
                return -1.5;
            },
                    target:function(player,target){
                var nh=target.countCards('h');
                if(get.mode()=='identity'){
                    if(target.isZhu&&nh<=2&&target.hp<=1) return -100;
                }
                if(nh==0) return -2;
                if(nh==1) return -1.7
                return -1.5;
            },
                },
                tag:{
                    respond:1,
                    respondShan:1,
                    damage:1,
                    multitarget:1,
                    multineg:1,
                },
            },
            fullimage:true,
        },
        jiakongls:{
            audio:true,
            type:"trick",
            enable:true,
            cardcolor:"red",
            selectTarget:-1,
            filterTarget:true,
            contentBefore:function(){
        "step 0"
        if(!targets.length){
            event.finish();
            return;
        }
        if(get.is.versus()){
            player.chooseControl('顺时针','逆时针',function(event,player){
                if(player.next.side==player.side) return '逆时针';
                return '顺时针';
            }).set('prompt','选择'+get.translation(card)+'的结算方向');
        }
        else{
            event.goto(2);
        }
        "step 1"
        if(result&&result.control=='顺时针'){
            var evt=event.getParent(),sorter=(_status.currentPhase||player);
            evt.fixedSeat=true;
            evt.targets.sortBySeat(sorter);
            evt.targets.reverse();
            if(evt.targets[evt.targets.length-1]==sorter){
                evt.targets.unshift(evt.targets.pop());
            }
        }
        "step 2"
        ui.clear();
        var num;
        if(event.targets){
            num=event.targets.length*2;
        }
        else{
            num=game.countPlayer()*2;
        }
        var cards=get.cards(num);
        game.cardsGotoOrdering(cards).relatedEvent=event.getParent();
        var dialog=ui.create.dialog('五谷丰登',cards,true);
        _status.dieClose.push(dialog);
        dialog.videoId=lib.status.videoId++;
        game.addVideo('cardDialog',null,['五谷丰登',get.cardsInfo(cards),dialog.videoId]);
        event.getParent().preResult=dialog.videoId;
        game.broadcast(function(cards,id){
            var dialog=ui.create.dialog('五谷丰登',cards,true);
            _status.dieClose.push(dialog);
            dialog.videoId=id;
        },cards,dialog.videoId);
        game.log(event.card,'亮出了',cards);
    },
            content:function(){
        "step 0"
        for(var i=0;i<ui.dialogs.length;i++){
            if(ui.dialogs[i].videoId==event.preResult){
                event.dialog=ui.dialogs[i];break;
            }
        }
        if(!event.dialog){
            event.finish();
            return;
        }
        if(event.dialog.buttons.length>1){
            var next=target.chooseButton(true,function(button){
                return get.value(button.link,_status.event.player);
            });
            next.set('dialog',event.preResult);
            next.set('closeDialog',false);
            next.set('dialogdisplay',true);
        }
        else{
            event.directButton=event.dialog.buttons[0];
        }
        "step 1"
        var dialog=event.dialog;
        var card;
        if(event.directButton){
            card=event.directButton.link;
        }
        else{
            for(var i of dialog.buttons){
                if(i.link==result.links[0]){
                    card=i.link;
                    break;
                }
            }
            if(!card) card=event.dialog.buttons[0].link;
        }

        var button;
        for(var i=0;i<dialog.buttons.length;i++){
            if(dialog.buttons[i].link==card){
                button=dialog.buttons[i];
                button.querySelector('.info').innerHTML=function(target){
                    if(target._tempTranslate) return target._tempTranslate;
                    var name=target.name;
                    if(lib.translate[name+'_ab']) return lib.translate[name+'_ab'];
                    return get.translation(name);
                }(target);
                dialog.buttons.remove(button);
                break;
            }
        }
        var capt=get.translation(target)+'选择了'+get.translation(button.link);
        if(card){
            target.gain(card,'visible');
            target.$gain2(card);
            game.broadcast(function(card,id,name,capt){
                var dialog=get.idDialog(id);
                if(dialog){
                    dialog.content.firstChild.innerHTML=capt;
                    for(var i=0;i<dialog.buttons.length;i++){
                        if(dialog.buttons[i].link==card){
                            dialog.buttons[i].querySelector('.info').innerHTML=name;
                            dialog.buttons.splice(i--,1);
                            break;
                        }
                    }
                }
            },card,dialog.videoId,function(target){
                if(target._tempTranslate) return target._tempTranslate;
                var name=target.name;
                if(lib.translate[name+'_ab']) return lib.translate[name+'_ab'];
                return get.translation(name);
            }(target),capt);
        }
        dialog.content.firstChild.innerHTML=capt;
        game.addVideo('dialogCapt',null,[dialog.videoId,dialog.content.firstChild.innerHTML]);
        game.log(target,'选择了',button.link);
        game.delay();
    },
            contentAfter:function(){
        for(var i=0;i<ui.dialogs.length;i++){
            if(ui.dialogs[i].videoId==event.preResult){
                var dialog=ui.dialogs[i];
                dialog.close();
                _status.dieClose.remove(dialog);
                if(dialog.buttons.length){
                    event.remained=[];
                    for(var i=0;i<dialog.buttons.length;i++){
                        event.remained.push(dialog.buttons[i].link);
                    }
                    event.trigger('wuguRemained');
                }
                break;
            }
        }
        game.broadcast(function(id){
            var dialog=get.idDialog(id);
            if(dialog){
                dialog.close();
                _status.dieClose.remove(dialog);
            }
        },event.preResult);
        game.addVideo('cardDialog',null,event.preResult);
    },
            ai:{
                wuxie:function(){
            if(Math.random()<0.5) return 0;
        },
                basic:{
                    order:3,
                    useful:0.5,
                },
                result:{
                    target:function(player,target){
                var sorter=(_status.currentPhase||player);
                if(get.is.versus()){
                    if(target==sorter) return 1.5;
                    return 1;
                }
                if(player.hasUnknown(2)){
                    return 0;
                }
                return (1-get.distance(sorter,target,'absolute')/game.countPlayer())*get.attitude(player,target)>0?0.5:0.7;
            },
                },
                tag:{
                    draw:1,
                    multitarget:1,
                },
            },
            fullimage:true,
        },
        mingzuyq:{
            audio:true,
            mode:["guozhan"],
            type:"equip",
            subtype:"equip5",
            distance:{
                attackFrom:-1,
            },
            nomod:true,
            nopower:true,
            unique:true,
            global:"g_dinglanyemingzhu_ai",
            skills:["dinglanyemingzhu_skill"],
            ai:{
                equipValue:function(card,player){
            if(player.hasSkill('jubao')) return 8;
            if(player.hasSkill('gzzhiheng')) return 6;
            if(game.hasPlayer(function(current){
                return current.hasSkill('jubao')&&get.attitude(player,current)<=0;
            })){
                return 0;
            }
            return 7;
        },
                basic:{
                    equipValue:6.5,
                    order:function(card,player){
                if(player&&player.hasSkillTag('reverseEquip')){
                    return 8.5-get.equipValue(card,player)/20;
                }
                else{
                    return 8+get.equipValue(card,player)/20;
                }
            },
                    useful:2,
                    value:function(card,player,index,method){
                if(player.isDisabled(get.subtype(card))) return 0.01;
                var value=0;
                var info=get.info(card);
                var current=player.getEquip(info.subtype);
                if(current&&card!=current){
                    value=get.value(current,player);
                }
                var equipValue=info.ai.equipValue;
                if(equipValue==undefined){
                    equipValue=info.ai.basic.equipValue;
                }
                if(typeof equipValue=='function'){
                    if(method=='raw') return equipValue(card,player);
                    if(method=='raw2') return equipValue(card,player)-value;
                    return Math.max(0.1,equipValue(card,player)-value);
                }
                if(typeof equipValue!='number') equipValue=0;
                if(method=='raw') return equipValue;
                if(method=='raw2') return equipValue-value;
                return Math.max(0.1,equipValue-value);
            },
                },
                result:{
                    target:function(player,target,card){
                return get.equipResult(player,target,card.name);
            },
                },
            },
            enable:true,
            selectTarget:-1,
            filterTarget:function(card,player,target){
        return target==player;
    },
            modTarget:true,
            allowMultiple:false,
            content:function(){
        if(cards.length&&get.position(cards[0],true)=='o') target.equip(cards[0]);
    },
            toself:true,
            fullimage:true,
        },
        hangkongzhan:{
            type:"equip",
            subtype:"equip4",
            ai:{
                basic:{
                    equipValue:7.5,
                    order:function(card,player){
                if(player&&player.hasSkillTag('reverseEquip')){
                    return 8.5-get.equipValue(card,player)/20;
                }
                else{
                    return 8+get.equipValue(card,player)/20;
                }
            },
                    useful:2,
                    value:function(card,player,index,method){
                if(player.isDisabled(get.subtype(card))) return 0.01;
                var value=0;
                var info=get.info(card);
                var current=player.getEquip(info.subtype);
                if(current&&card!=current){
                    value=get.value(current,player);
                }
                var equipValue=info.ai.equipValue;
                if(equipValue==undefined){
                    equipValue=info.ai.basic.equipValue;
                }
                if(typeof equipValue=='function'){
                    if(method=='raw') return equipValue(card,player);
                    if(method=='raw2') return equipValue(card,player)-value;
                    return Math.max(0.1,equipValue(card,player)-value);
                }
                if(typeof equipValue!='number') equipValue=0;
                if(method=='raw') return equipValue;
                if(method=='raw2') return equipValue-value;
                return Math.max(0.1,equipValue-value);
            },
                },
                result:{
                    target:function(player,target,card){
                return get.equipResult(player,target,card.name);
            },
                },
            },
            skills:["先制航空攻击"],
            enable:true,
            selectTarget:-1,
            filterTarget:function(card,player,target){
        return target==player;
    },
            modTarget:true,
            allowMultiple:false,
            content:function(){
        if(cards.length&&get.position(cards[0],true)=='o') target.equip(cards[0]);
    },
            toself:true,
            fullimage:true,
        },
        paohuozb:{
            type:"equip",
            subtype:"equip1",
            distance:{
                attackFrom:-2,
            },
            ai:{
                basic:{
                    equipValue:2,
                    order:function(card,player){if(player.hp>2)return true
                if(player&&player.hasSkillTag('reverseEquip')){
                    return 6.5-get.equipValue(card,player)/20;
                }
                else{
                    return 4+get.equipValue(card,player)/20;
                }
            },
                    useful:2,
                    value:function(card,player,index,method){
                if(player.isDisabled(get.subtype(card))) return 0.01;
                var value=0;
                var info=get.info(card);
                var current=player.getEquip(info.subtype);
                if(current&&card!=current){
                    value=get.value(current,player);
                }
                var equipValue=info.ai.equipValue;
                if(equipValue==undefined){
                    equipValue=info.ai.basic.equipValue;
                }
                if(typeof equipValue=='function'){
                    if(method=='raw') return equipValue(card,player);
                    if(method=='raw2') return equipValue(card,player)-value;
                    return Math.max(0.1,equipValue(card,player)-value);
                }
                if(typeof equipValue!='number') equipValue=0;
                if(method=='raw') return equipValue;
                if(method=='raw2') return equipValue-value;
                return Math.max(0.1,equipValue-value);
            },
                },
                result:{
                    target:function(player,target,card){
                return get.equipResult(player,target,card.name);
            },
                },
            },
            skills:["炮火准备1","danzong"],
            enable:true,
            selectTarget:-1,
            filterTarget:function(card,player,target){
        return target==player;
    },
            modTarget:false,
            allowMultiple:false,
            content:function(){
        if(cards.length&&get.position(cards[0],true)=='o') target.equip(cards[0]);
    },
            toself:true,
            fullskin:true,
        },
        xingyun:{
            derivation:"majun",
            type:"equip",
            subtype:"equip3",
            ai:{
                basic:{
                    equipValue:7.5,
                    order:function(card,player){
                if(player&&player.hasSkillTag('reverseEquip')){
                    return 8.5-get.equipValue(card,player)/20;
                }
                else{
                    return 8+get.equipValue(card,player)/20;
                }
            },
                    useful:2,
                    value:function(card,player,index,method){
                if(player.isDisabled(get.subtype(card))) return 0.01;
                var value=0;
                var info=get.info(card);
                var current=player.getEquip(info.subtype);
                if(current&&card!=current){
                    value=get.value(current,player);
                }
                var equipValue=info.ai.equipValue;
                if(equipValue==undefined){
                    equipValue=info.ai.basic.equipValue;
                }
                if(typeof equipValue=='function'){
                    if(method=='raw') return equipValue(card,player);
                    if(method=='raw2') return equipValue(card,player)-value;
                    return Math.max(0.1,equipValue(card,player)-value);
                }
                if(typeof equipValue!='number') equipValue=0;
                if(method=='raw') return equipValue;
                if(method=='raw2') return equipValue-value;
                return Math.max(0.1,equipValue-value);
            },
                },
                result:{
                    target:function(player,target,card){
                return get.equipResult(player,target,card.name);
            },
                },
            },
            skills:["rw_bagua_skill"],
            enable:true,
            selectTarget:-1,
            filterTarget:function(card,player,target){
        return target==player;
    },
            modTarget:false,
            allowMultiple:false,
            content:function(){
        if(cards.length&&get.position(cards[0],true)=='o') target.equip(cards[0]);
    },
            toself:false,
            fullimage:true,
        },
        sansheyl:{
            audio:true,
            nature:["thunder","fire","kami","ice"],
            type:"basic",
            enable:true,
            usable:1,
            updateUsable:"phaseUse",
            range:function(card,player,target){
        return player.inRange(target);
    },
            selectTarget:3,
            cardPrompt:function(card){
        if(card.nature=='stab') return '出牌阶段，对你攻击范围内的一名角色使用。其须使用一张【闪】，且在此之后需弃置一张手牌（没有则不弃）。否则你对其造成1点伤害。';
        if(lib.linked.contains(card.nature)) return '出牌阶段，对你攻击范围内的一名角色使用。其须使用一张【闪】，否则你对其造成1点'+get.translation(card.nature)+'属性伤害。';
        return '出牌阶段，对你攻击范围内的一名角色使用。其须使用一张【闪】，否则你对其造成1点伤害。';
    },
            "yingbian_prompt":function(card){
        var str='';
        if(get.cardtag(card,'yingbian_hit')){
            str+='此牌不可被响应';
        }
        if(get.cardtag(card,'yingbian_damage')){
            if(str.length) str+='；';
            str+='此牌的伤害值基数+1';
        }
        if(!str.length||get.cardtag(card,'yingbian_add')){
            if(str.length) str+='；';
            str+='当你使用此牌选择目标后，你可为此牌增加一个目标';
        }
        return str;
    },
            yingbian:function(event){
        var card=event.card,bool=false;
        if(get.cardtag(card,'yingbian_hit')){
            bool=true;
            event.directHit.addArray(game.players);
            game.log(card,'不可被响应');
        }
        if(get.cardtag(card,'yingbian_damage')){
            bool=true;
            if(typeof event.baseDamage!='number') event.baseDamage=1;
            event.baseDamage++;
            game.log(event.card,'的伤害值基数+1');
        }
        if(!bool||get.cardtag(card,'yingbian_add')){
            event.yingbian_addTarget=true;
        }
    },
            "yingbian_tags":["hit","damage","add"],
            filterTarget:function(card,player,target){return player!=target},
            content:function(){
        "step 0"
        if(typeof event.shanRequired!='number'||!event.shanRequired||event.shanRequired<0){
            event.shanRequired=1;
        }
        if(typeof event.baseDamage!='number') event.baseDamage=1;
        if(typeof event.extraDamage!='number') event.extraDamage=0;
        "step 1"
        if(event.directHit||event.directHit2||(!_status.connectMode&&lib.config.skip_shan&&!target.hasShan())){
            event._result={bool:false};
        }
        else if(event.skipShan){
            event._result={bool:true,result:'shaned'};
        }
        else{
            var next=target.chooseToUse('请使用一张闪响应杀');
            next.set('type','respondShan');
            next.set('filterCard',function(card,player){
                if(get.name(card)!='shan') return false;
                return lib.filter.cardEnabled(card,player,'forceEnable');
            });
            if(event.shanRequired>1){
                next.set('prompt2','（共需使用'+event.shanRequired+'张闪）');
            }
            else if(event.card.nature=='stab'){
                next.set('prompt2','（在此之后仍需弃置一张手牌）');
            }
            next.set('ai1',function(card){
                var target=_status.event.player;
                var evt=_status.event.getParent();
                var bool=true;
                if(_status.event.shanRequired>1&&!get.is.object(card)&&target.countCards('h','shan')<_status.event.shanRequired){
                    bool=false;
                }
                else if(target.hasSkillTag('useShan')){
                    bool=true;
                }
                else if(target.hasSkillTag('noShan')){
                    bool=false;
                }
                else if(get.damageEffect(target,evt.player,target,evt.card.nature)>=0) bool=false;
                if(bool){
                    return get.order(card);
                }
                return 0;
            }).set('shanRequired',event.shanRequired);
            next.set('respondTo',[player,card]);
            //next.autochoose=lib.filter.autoRespondShan;
        }
        "step 2"
        if(!result||!result.bool||!result.result||result.result!='shaned'){
            event.trigger('shaHit');
        }
        else{
            event.shanRequired--;
            if(event.shanRequired>0){
                event.goto(1);
            }
            else if(event.card.nature=='stab'&&target.countCards('h')>0){
                event.responded=result;
                event.goto(4);
            }
            else{
                event.trigger('shaMiss');
                event.responded=result;
            }
        }
        "step 3"
        if((!result||!result.bool||!result.result||result.result!='shaned')&&!event.unhurt){
            target.damage(get.nature(event.card),event.baseDamage+event.extraDamage);
            event.result={bool:true}
            event.trigger('shaDamage');
        }
        else{
            event.result={bool:false}
            event.trigger('shaUnhirt');
        }
        event.finish();
        "step 4"
        target.chooseToDiscard('刺杀：请弃置一张牌，否则此【杀】依然造成伤害').set('ai',function(card){
            var target=_status.event.player;
            var evt=_status.event.getParent();
            var bool=true;
            if(get.damageEffect(target,evt.player,target,evt.card.nature)>=0) bool=false;
            if(bool){
                return 8-get.useful(card);
            }
            return 0;
        });
        "step 5"
        if((!result||!result.bool)&&!event.unhurt){
            target.damage(get.nature(event.card),event.baseDamage+event.extraDamage);
            event.result={bool:true}
            event.trigger('shaDamage');
            event.finish();
        }
        else{
            event.trigger('shaMiss');
        }
        "step 6"
        if((!result||!result.bool)&&!event.unhurt){
            target.damage(get.nature(event.card),event.baseDamage+event.extraDamage);
            event.result={bool:true}
            event.trigger('shaDamage');
            event.finish();
        }
        else{
            event.result={bool:false}
            event.trigger('shaUnhirt');
        }
    },
            ai:{
                yingbian:function(card,player,targets,viewer){
            if(get.attitude(viewer,player)<=0) return 0;
            var base=0,hit=false;
            if(get.cardtag(card,'yingbian_hit')){
                hit=true;
                if(targets.filter(function(target){
                    return target.hasShan()&&get.attitude(viewer,target)<0&&get.damageEffect(target,player,viewer,get.nature(card))>0;
                })) base+=5;
            }
            if(get.cardtag(card,'yingbian_all')){
                if(game.hasPlayer(function(current){
                    return !targets.contains(current)&&lib.filter.targetEnabled2(card,player,current)&&get.effect(current,card,player,player)>0;
                })) base+=5;
            }
            if(get.cardtag(card,'yingbian_damage')){
                if(targets.filter(function(target){
                    return get.attitude(player,target)<0&&(hit||!target.mayHaveShan()||player.hasSkillTag('directHit_ai',true,{
                    target:target,
                    card:card,
                    },true))&&!target.hasSkillTag('filterDamage',null,{
                        player:player,
                        card:card,
                        jiu:true,
                    })
                })) base+=5;
            }
            return base;
        },
                canLink:function(player,target,card){
            if(!target.isLinked()&&!player.hasSkill('wutiesuolian_skill')) return false;
            if(target.mayHaveShan()&&!player.hasSkillTag('directHit_ai',true,{
                target:target,
                card:card,
            },true)) return false;
            if(player.hasSkill('jueqing')||player.hasSkill('gangzhi')||target.hasSkill('gangzhi')) return false;
            return true;
        },
                basic:{
                    useful:[5,3,1],
                    value:[5,3,1],
                },
                order:function(item,player){
            if(player.hasSkillTag('presha',true,null,true)) return 10;
            if(lib.linked.contains(get.nature(item))){
                if(game.hasPlayer(function(current){
                    return current!=player&&current.isLinked()&&player.canUse(item,current,null,true)&&get.effect(current,item,player,player)>0&&lib.card.sha.ai.canLink(player,current,item);
                })&&game.countPlayer(function(current){
                    return current.isLinked()&&get.damageEffect(current,player,player,get.nature(item))>0;
                })>1) return 3.1;
                return 3;
            }
            return 3.05;
        },
                result:{
                    target:function(player,target,card,isLink){
                var eff=function(){
                    if(!isLink&&player.hasSkill('jiu')){
                        if(!target.hasSkillTag('filterDamage',null,{
                            player:player,
                            card:card,
                            jiu:true,
                        })){
                            if(get.attitude(player,target)>0){
                                return -7;
                            }
                            else{
                                return -4;
                            }
                        }
                        return -0.5;
                    }
                    return -1.5;
                }();
                if(!isLink&&target.mayHaveShan()&&!player.hasSkillTag('directHit_ai',true,{
                    target:target,
                    card:card,
                },true)) return eff/1.2;
                return eff;
            },
                },
                tag:{
                    respond:1,
                    respondShan:1,
                    damage:function(card){
                if(card.nature=='poison') return;
                return 1;
            },
                    natureDamage:function(card){
                if(card.nature) return 1;
            },
                    fireDamage:function(card,nature){
                if(card.nature=='fire') return 1;
            },
                    thunderDamage:function(card,nature){
                if(card.nature=='thunder') return 1;
            },
                    poisonDamage:function(card,nature){
                if(card.nature=='poison') return 1;
            },
                },
            },
            fullimage:true,
        },
        translate:{
            jinjuzy:"近距支援",
            "jinjuzy_info":"出牌阶段，对所有其他角色使用。每名目标角色需打出一张【闪】，否则受到1点伤害。",
            jiakongls:"架空历史",
            "jiakongls_info":"群星璀璨，欧陆风云，两个五谷丰登的效果",
            mingzuyq:"民族乐器",
            "mingzuyq_info":"北境之地的文化艺术。锁定技，你视为拥有技能“制衡”，若你已经有“制衡”，则改为取消弃置牌数的限制。",
            hangkongzhan:"航空战",
            "hangkongzhan_info":"建树丰厚，参与每轮开始时的三连杀战斗吗，每轮最多弃置三张牌。",
            paohuozb:"炮火准备",
            "paohuozb_info":"试试就逝世，扣一血得属性杀增伤一次，然而现在所有舰船都有这个，可以图加一杀次数。",
            xingyun:"幸运",
            "xingyun_info":"当你需要使用或打出一张【闪】时，你可以进行判定，若判定结果不为黑桃，视为你使用或打出了一张【闪】。",
            sansheyl:"攻击",
            "sansheyl_info":"其实就是杀，但出此杀时必须能打三个目标。",
        },
        list:[],
    },
    skill:{
        skill:{
            tiaozhanzhuanbei:{
                trigger:{
                    global:"phaseBefore",
                    player:"enterGame",
                },
                forced:true,
                filter:function(event,player){
        return (event.name!='phase'||game.phaseNumber==0);
    },
                content:function(){
        player.equip(game.createCard2('xingyun','club',0));
        player.equip(game.createCard2('paohuozb','club',0));
        player.equip(game.createCard2('miki_binoculars','diamond',0));
    },
                mod:{
                    canBeDiscarded:function(card){
            if(get.position(card)=='e'&&['equip1','equip5','equip6'].contains(get.subtype(card))) return false;
        },
                },
                intro:{
                    content:function(){
            return get.translation(skill+'_info');
        },
                },
                "audioname2":{
                    "key_shiki":"shiki_omusubi",
                },
            },
            danzong:{
                equipSkill:true,
                trigger:{
                    player:"useCard1",
                },
                filter:function(event,player,card){
        if(event.card.name=='sha'&&!event.card.nature) return true;
    },
                audio:"ext:1牌将修改:true",
                usable:2,
                name:"弹种",
                check:function(event,player){
        var eff=0;
        for(var i=0;i<event.targets.length;i++){
            var target=event.targets[i];
            var eff1=get.damageEffect(target,player,player);
            var eff2=get.damageEffect(target,player,player,'fire');
            eff+=eff2;
            eff-=eff1;
        }
        return eff>=0;
    },
                "prompt2":function(event,player){
   {if((player.hasSkill('quzhudd')|player.hasSkill('qianting'))) {return '将'+get.translation(event.card)+'限一次，使用杀时可令非属性杀获得雷属性（命中后：目标有护甲时，伤害穿透护甲；减少舰船防御距离1点，增加舰船被集火的效果）及无视防具效果'};if(player.hasSkill('zhanliebb')|player.hasSkill('hangmucv')) {return '将'+get.translation(event.card)+'限一次，使用杀时可令非属性杀获得冰属性（命中后：目标有护甲时，加1伤；减少对手1点防御距离）'};return '将'+get.translation(event.card)+'限一次，使用杀时可令非属性杀获得火属性（命中后：目标出牌阶段结束时受到一点火焰伤害，并摸一张牌）。'};
    },
                content:function(){
        trigger.card.nature='fire';
        if((player.hasSkill('quzhudd')|player.hasSkill('qianting'))){player.addTempSkill('qinggang_skill','useCard1');  trigger.card.nature='thunder'};        if((player.hasSkill('zhanliebb')|player.hasSkill('hangmucv'))){  trigger.card.nature='ice'};
        if(get.itemtype(trigger.card)=='card'){
            var next=game.createEvent('zhuque_clear');
            next.card=trigger.card;
            event.next.remove(next);
            trigger.after.push(next);
            next.setContent(function(){
                delete card.nature;
            });
        }
    },
                intro:{
                    content:function(){
            return get.translation(skill);
        },
                },
            },
            huihejieshu:{
                audio:"ext:1牌将修改:2",
                trigger:{
                    player:"phaseJieshuBegin",
                },
                fixed:true,
                frequent:true,
                content:function(){if(!player.storage.huijiahuihe){
        if(player.hasMark('yuanhangmopai')){ player.removeMark('yuanhangmopai')}else if(!(player.countMark('mopaiup')<1)){player.draw()}
;if(player.hasSkill('qingxuncl')){player.draw()}};
    },
                intro:{
                    content:function(){
            return get.translation(skill+'_info');
        },
                },
            },
            qianghuachuan:{
                mod:{
                    globalFrom:function(from,to,distance){//这个函数已经设置好发起者,防守者,距离三个对象，同player用就行。不用再加新的
        //from，to，（发起，受到）这两就是player，trigger，可使用相同代码。mod和trigger得考虑对象是否已经有代指。
       //distance也不用加减得到了，直接用就可以，用var，或者return赋值。最好是加减标记的数量，其次是数组类与固定数值。
        //进攻距离 输出distance给所有事件与触发器
return distance-=(from.countMark('rangeup'));},
                    globalTo:function(from,to,distance){//注意这里是技能者要挨牌了，调用to的东西，from的hpmaxHp之类的也可以用，to也一样，
        //防守，肯定加距离，防止顺手牵羊。被boss恶心坏了。费用距离
return distance+=(to.countMark('spendup'));},
                    maxHandcard:function(player,num){//手牌上限，这个好理解，num是这个函数原本输出的数量，num=num加数字就可以变更了。
        return num=num},
                    cardUsable:function( card,player,num){//是技能者卡片使用次数，输出num，注意这个mod函数会遍历技能者各种卡片的使用次数。
         //if会让之后的函数/计算有条件的执行，还可以再接一个函数else，让不满足条件的时候再执行一个函数才｝或者；完成if制作。
         //没有huosha，火杀连牌都不是还行，定义nature吧，
     if(card.name=='sha') return num=num+=(player.countMark('useshaup'))},
                    selectTarget:function(card,player,range){//是卡片作用时可选的目标数量，输出range给牌的发起事件阶段用。
         //if(card.name=='sha'&&range[1]!=-1)range[1]+=player.maxHp-player.hp ，这也能改吗……
        },
                    attackFrom:function(from,to,distance){//打人的距离但主要是sha的攻击范围，应该是武器常用的mod技能，参考+=player.maxHp-player.hp
        //装备牌外接了一个技能(group('zhangba_skill'))，游戏设计好了直接用模板，当然响应牌确难制作。
       return distance;
    },
                },
                direct:true,
                mark:true,
                init:function(player){//初始化数组，放心不是加法，也不会再执行一次就重置，这个数组设置了就一直存在这个对象上
        //getInfo[666，999]可以指定调出数组里面第x个的内容，最好var一个普通变量出来再调用。 delete 加代码可以删除
        //可以list= lib.skill.qianghuachuan.getInfo列表        lists[1,2,3,4]输出
    if(!player.storage.qianghuachuan) player.storage.qianghuachuan=[0,0,0,0];    },
                getInfo:function(player){//设置于player上的、可以输出数组，在lib.skill.数组 后加getinfo，就可以使用于有对象的地方了
    //，若下面intro的content的function没有player就无法使用storage数组，以及与player有关的其他数据。
    //，遇到error:notdifine变量，function加个player试试
    if(!player.storage.qianghuachuan) player.storage.qianghuachuan=[0,0,0,0];
    return player.storage.qianghuachuan;},
                intro:{
                    marktext:"强化",
                    content:function(storage,player){//介绍内容，没法var content的输出对象，那就return给这个函数内容吧。
       //marktext是武将牌上标记的强化舰船，mark默认显示标记吧，下面是动态介绍，数组有变化info就会变化，intro函数无需触发器，简单一点。
       //我注释又双双被吃了，不要在skill上写注释哦。要在有function的括号里写哦。函数的第二个单词要大写哦。
 var info=lib.skill.qianghuachuan.getInfo(player);
        return '<div class="text center"><span class=thundertext>攻击射程：'+info[0]+'</span>　<span class=firetext>攻击次数：'+info[1]+'</span><br><span class=greentext>响应摸牌：'+info[2]+'</span>　<span class=yellowtext>机动防御：'+info[3]+'</span></div>'
     ;     },
                },
                enable:"phaseUse",
                usable:2,
                filter:function(event,player){
     //enable能在什么阶段发动，这，么写会变为右下角按钮触发型技能，可以用trigger代替，设计为一个对象进入一个阶段就(被动选择)放，但会失去主动技能预设的一些功能，usable限制使用次数
     //fliter可以调用事件对向和技能使用者，对技能释放的卡片做限制，'het'是游戏预设的简写,见下。md，怎么下面那个会清空注释
     //  handCard手牌 ，equip装备牌，简写时是用于装备区， trick锦囊牌,judge是判定区，其他delay延时性锦囊牌。
     //选择玩家｛标签为装备｝（在手牌区与装备区）的卡片数量大于0，且玩家 能用杀时。lib.filter.cardEnabled({name:'sha'},player));
     //filter内还可以套娃，做更具体的限制，cardEnabled是能不能用卡片，抄一个用用，&&和&可以不用括号连接两个条件。
       var a=player.countMark('rangeup'),  b=player.countMark('useshaup'), c=player.countMark('mopaiup') , d=player.countMark('spendup'),e=player.countMark('gaizhaoup');
       if (player.countCards('he',{type:'equip'})>0){if((a+b+c+d)>(2+e*2))return false} return true;
        ;
    },
                filterCard:{
                    type:"equip",
                },
                position:"he",
                selectCard:1,
                prompt:"你可以弃置一张装备牌，选择一个永久效果升级角色,每回合限两次,最多四次",
                check:function(card){//这个不会清理注释,happy,ai选择什么牌，&&player.getEquip(1)
        //什么时候发动可以加player搬一个卡片数量限制下来，get.value(card)是常用代码，所有可用牌的价值。
        return 40-get.value
    },
                content:function(){
         'step 0'//好&&player.getEquip(1),这个注释不会清除欸。control是返回文字吧，要用==判定，而不是=赋值了
        //，备份代码 ，失误几十次了，怕了。不碰了，没爱了，恨透了，悔恨的泪水。好吧动态的文字不行
     //if(result.control=='防御距离')   player.addMark('spendup',1)&&event.finish ;对于动态选项文字不可行
   //  if(result.control='所有伤害')  player.addMark('atkup',1)&&event.finish    ;
   //  if(result.control=='摸牌次数('+player.countMark('mopaiup')+')')   player.addMark('mopaiup',1)&&event.finish    ;
   //control适合静态文字比如取消，index适合subskill、list与storage协作引导的技能释放，以及生成会变化文本的选项。
   //分步事件是技能自己的阶段、自己的事件，可以作为其他技能的触发条件哦，当然大多数技能触发时也是事件。
         var a=player.countMark('rangeup'),  b=player.countMark('useshaup'), c=player.countMark('mopaiup') , d=player.countMark('spendup')
 player.storage.qianghuachuan=[a,b,c,d];game.log('已强化:',a+b+c+d);
 player.chooseControl('<span class=thundertext>射程('+a+')</span>','<span class=firetext>次数('+b+')</span>','<span class=greentext>摸牌('+c+')</span>','<span class=yellowtext>机动('+d+')</span>','cancel2').set('prompt',get.prompt('qianghuachuan')).set('prompt2','令其中一项数字+1,强化舰船强力之处，〖改造〗舰船薄弱之处,解释：<br>“射程”为：含锦囊牌攻击距离；<br>“次数”为：出杀次数；“摸牌“为：远航的摸牌；“机动”为：含锦囊牌防御距离').set('ai',function(event,player){
            var player=_status.event.player,info=lib.skill.qianghuachuan.getInfo(player);
            if(info[0]<info[3])return 0;
            if(info[3]<info[1]) return 3;
            if(info[1]<info[2]) return 1;
            if(info[2]<=info[0])  return 2;
        });
            'step 1'
         if(result.control!='cancel2'){event.suit = result.control;event.num = result.index;;game.log('你的选择为:',event.suit,result.index)};
            'step 2'
       if(event.num==0) {  player.addMark('rangeup',1)} ;;
            'step 3'
       if(event.num==1)    {player.addMark('useshaup',1) }   ;;
            'step 4'
       if(event.num==2) {  player.addMark('mopaiup',1)  }   ;;
       if(event.num==3)   {   player.addMark('spendup',1)   } ;;
                
            var a=player.countMark('rangeup'),  b=player.countMark('useshaup'), c=player.countMark('mopaiup') , d=player.countMark('spendup')
 player.storage.qianghuachuan=[a,b,c,d];//介绍的更新，update.storage没用过，if没有否则多打点英文“；”被害惨了。
        //下面是ai，md又清理文本没爱了，f--k you ，order为发动先后顺序，大概是7为装完装备，3为桃前，只是比大小罢了
        //result为让不让ai发动技能，player=1是有这个技能就放，可以-player.hp或者-countCard，甚至搬一个技能filter下来
        //配音输名字就行，本体有教程，选项-倒数2文件-导入资源，支持武将名+123
    },
                ai:{
                    order:9,
                    threaten:0,
                    result:{
                        player:function(player){var num=player.countCards('e')-1;
            return num;},
                    },
                },
            },
            gaizaochuan:{
                enable:"phaseUse",
                usable:1,
                complexCard:true,
                limited:true,
                skillAnimation:true,
                selectCard:3,
                filterCard:function(card,player){
        if(ui.selected.cards.length){
            return get.suit(card)==get.suit(ui.selected.cards[0]);
        }
        var cards=player.getCards('he');
        for(var i=0;i<cards.length;i++){
            if(card!=cards[i]){
                if(get.suit(card)==get.suit(cards[i])) return true
            }
        }
        return false;
    },
                filter:function(event,player){var info=lib.skill.qianghuachuan.getInfo(player);
      if((info[0]+info[1]+info[2]+info[3])>-1){ return true};},
                check:function(card){  return 60-get.value(card);
    },
                prompt:"当此角色强化了两次以后，你可弃三张同花色的牌，提升一点血量上限，回复两点体力，最大血量大于3会再加1点体力上限，算了，全都是加2体力上限吧,重复改造只会回血。</br>注意,改造舰船将令此舰船受到舰种的属性杀克制，打不过就算了吧。。",
                content:function(){//skillAnimation:true,
        //player:function(player,card){
           //      if((player.countCard(h)-player.countMark('gaizhaoup'))>player.maxHp/2)return 1;  },   
        player.addMark('gaizhaoup');;player.recover();
if(player.countMark('atkup')<1){player.gainMaxHp(1);player.addMark('atkup',1);player.recover();player.awakenSkill('gaizaochuan');player.gainMaxHp(1);} ;
    
  },
                ai:{
                    expose:0,
                    threaten:0,
                    order:6,
                    result:{
                        player:1,
                    },
                },
                mark:false,
                intro:{
                    content:"limited",
                },
                init:function(player,skill){
        player.storage[skill]=false;
    },
            },
            "paohuozb_skill":{
                mod:{
                    maxHandcard:function(player,num){
            return num-1;
        },
                    cardUsable:function(card,player,num){
            if(card.name=='sha') return num+1;
        },
                },
                trigger:{
                    player:"equipAfter",
                },
                forced:true,
                equipSkill:true,
                filter:function(event,player){
        return event.card.name=='炮火准备';
    },
                content:function(){
        player.loseHp();
    },
                intro:{
                    content:function(){
            return get.translation(skill);
        },
                },
            },
            fupaozu:{
                enable:"phaseUse",
                usable:1,
                complexCard:true,
                selectCard:[2,5],
                filterTarget:function(card,player,target){  if( target!=player&&player.inRange(target))return true;    },
                filter:function(event,player){
        return !player.countCards('h','sha')|!player.canUse('sha',player);
    },
                filterCard:function(card,player){
        if(ui.selected.cards.length){
            return get.suit(card)==get.suit(ui.selected.cards[0]);
        }
        var cards=player.getCards('he');
        for(var i=0;i<cards.length;i++){
            if(card!=cards[i]){
                if(get.suit(card)==get.suit(cards[i])) return true;
            }
        }
        return false;
    },
                check:function(card){  return 60-get.value(card);
    },
                prompt:"在没有杀或者不能出杀时，可弃置最多五张同花牌，耗n-2滴血，n为弃牌数,对你选择的目标视为出n-1个杀，<br>弃置达到（4，5）的杀拥有属性杀，极限4发，回复出杀次数会生效,技能结束后会获得袭击运输船技能",
                content:function(){//(if(event.num>2) player.useCard({name:'sha'},event.targets.randomGet());      player.chooseUseTarget({name:'sha'},false,'nodistance');event.num=event.cards.length;event.targets=player.getEnemies();
'step 0'
    player.addTempSkill('touxichuan','phaseAfter');var d=game.countPlayer(function(current){ return current!=player&&(get.attitude(player,current)<1)&&(current.hasSkill('bagua_skill')|current.hasSkill('re_bagua_skill'));  });
 game.log('有八卦的角色:',d,'弃置的手牌:',);
        player.chooseTarget(get.prompt2('在离开战斗前，你还可以令队友、关注的对象摸三张牌，或许会有转机出现'),function(card,player,target){
            return target.maxHp>0&&player.inRange(target);
        }).set('ai',function(target){
            var att=-get.attitude(_status.event.player,target);
            if(target.hasSkill('zhanliebb')|target.hasSkill('hangmucv')){ att*=1.1};
    if(Math.ceil(target.hp*2)<=target.maxHp){ att*=1.3};if(target.countCards('h')<3){ att*=1.3};
    if(target.hasSkill('bagua_skill')|target.hasSkill('re_bagua_skill')){ att*=0.5};
             return att
        });
        'step 1'
        if(result.bool){
            var target=result.targets[0];
            event.target=target;
if(event.num>1) player.useCard({name:'sha'},event.target);
if(event.num>2) player.useCard({name:'sha'},event.target);
if(event.num>3) player.useCard({name:'sha',nature:'thunder',isCard:false},event.target);
if(event.num>4) player.useCard({name:'sha',nature:'fire',isCard:false},event.target);;
if(event.num>1) player.damage(event.num-2);}else event.finish;
  },
                ai:{
                    expose:0.3,
                    threaten:6.8,
                    order:4,
                    result:{
                        target:function(target,player){if(get.attitude(player,target)>0&&player.inRange(target)){
        if(player.countCards('he')>3){if(target.countCards('h')<4)return -1;return 0};return 0};
    },
                    },
                },
                intro:{
                    content:function(){
            return get.translation(skill);
        },
                },
            },
            zhuangjiafh:{
                trigger:{
                    player:"damageEnd",
                },
                direct:true,
                filter:function(event,player){
        return player.countCards('he',{color:'black'})>0&&player.hujia==0
    },
                content:function(){
        'step 0'
        var next=player.chooseToDiscard('he',{color:'black'},get.prompt('受伤后,若你没有护甲，可以弃置一张黑色牌获得1点护甲'));
        next.ai=function(card){
            return 8-get.value(card);
        };
        next.logSkill='zhuangjiafh'
        'step 1'
        if(result.bool){
            player.changeHujia();
        }
    },
            },
            hangmucv:{
                intro:{
                    content:function(){
                return get.translation(skill+'_info');
            },
                },
            },
            yuanhang:{
                group:["yuanhang_mopai","yuanhang_bingsimopai","yuanhang_dietogain"],
                mod:{
                    attackFrom:function(from,to,distance){var a=0;if(from.hasSkill('qianting')){var a=a+1};if(from.hasSkill('quzhudd')&&to.hasSkill('qianting')){var a=a-1};
       if(from.hp*2<=from.maxHp){var a=a-1};return distance=(distance+a)},
                    maxHandcard:function(player,num){var a=0;if(player.hasSkill('junfu')|player.hasSkill('qianting')){var a=a+3};if(player.hasSkill('qingxuncl')|player.hasSkill('quzhudd')|player.hasSkill('daoqu')){ a+=(2)};
         if((player.hasSkill('zhongxuncl')|player.hasSkill('zhanliebb')|player.hasSkill('hangmucv'))&&(player.hp<player.maxHp)){ a+=(1)};
         return num=(num+a);},
                    cardUsable:function(card,player,num){if(card.name=='sha') return num=(num+(player.hp<player.maxHp))},
                    globalFrom:function(from,to,distance){
var a=0;if(from.hasSkill('qianting')){var a=a-1};return distance=(distance+a);},
                    globalTo:function(from,to,distance){//进攻距离-1的同时武器距离-1，
var a=0;if(to.hasSkill('qianting')){var a=1};return distance=(distance+a);},
                },
                trigger:{
                    global:"phaseBefore",
                    player:"enterGame",
                },
                forced:true,
                filter:function(event,player){
        return (event.name!='phase'||game.phaseNumber==0);
    },
                content:function(){
     //   group:["yuanhangmopai","huihejieshu","gaizaochuan","xshuangren","kaifa","diewulimitai","wulidebuff","qianghuachuan"],
    player.addSkill()
    },
                ai:{
                    expose:0,
                    threaten:0,
                    order:5,
                    result:{
                        player:1,
                    },
                },
                subSkill:{
                    mopai:{
                        trigger:{
                            player:"loseAfter",
                            global:["equipAfter","addJudgeAfter","loseAsyncAfter","addToExpansionAfter"],
                        },
                        frequent:true,
                        usable:2,
                        nowuxie:false,
                        filter:function(event,player){
    //角色于失去牌阶段后，经历全局阶段“装备装备后，加入判定牌后，失去牌后，用牌响应事件”后，执行content
    //sd没错，无名杀是阶段+事件驱动游戏，没有攻击和摸牌数值，大多数操作会先经历事件或者阶段再来实现。
    //各种阶段的名字找教程，教程全，要用复制粘贴即可。
    //防止仁德给牌移除了给牌阶段后。为了平衡用usable限制。建议触发条件按手牌上限算，不然不是强如曹金玉就是弱如陆逊。
        var d=(player.getHandcardLimit()/2)
        if(player.countCards('h')>d) return false;
        var evt=event.getl(player);
        return evt&&evt.player==player&&evt.hs&&evt.hs.length>0;
        //当手牌小于上线一半或者是准备阶段就执行，frequent自动执行，也可以force锁定强制执行。
    },
                        content:function(){//最好是draw摸牌而不是增加事件阶段，事件会被跳过一个兵粮就没法玩了，player.markSkill不太行
     //不过想玩张辽技能的话，trigger改为玩家摸牌开始2，comtent加入trigger.num++，
    //这将增加摸牌2的回合数来实现增加摸牌。用addmark，countMark存储变量稳定但是他们需要清除。var a=player.简便
    //player.drawTo(num)补牌至x，可以里面来个math.min(3,player.maxHp)做平衡。filter里的运算也可以搬过来。
    //if引导多个事件触发推荐用大括号括一下，else为否则，与if连起来就可以使用了，别加;哦。下面的ai复制粘贴的，
    //ai：expose被发现的数值，积累至1以上被ai发现身份。threaten被打的权重，理解是威胁度、嘲讽能力。
     if(player.hasMark('yuanhangmopai')|(player.countMark('mopaiup')<1)){ player.draw(1)}
        else {player.draw(1+player.countMark('mopaiup')),player.addMark('yuanhangmopai')};
     
    },
                        ai:{
                            expose:0,
                            threaten:0,
                            order:5,
                            result:{
                                player:1,
                            },
                        },
                        sub:true,
                    },
                    dietogain:{
                        trigger:{
                            player:["dieAfter"],
                        },
                        direct:true,
                        forceDie:true,
                        filter:function(event,player){
        if(event.name=='die') return true;
        return player.isAlive();
    },
                        content:function(){
        'step 0'
        event.count=trigger.num||1;
        'step 1'
        event.count--;
        player.chooseTarget(get.prompt2('在离开战斗前，你还可以令队友、关注的对象摸三张牌，或许会有转机出现'),function(card,player,target){
            return target.maxHp>0;
        }).set('ai',function(target){
            var att=get.attitude(_status.event.player,target);
            var draw=Math.min(3,target.maxHp);
            if(target.hasSkill('zhanliebb')) att*=6;
                return att/3
        });
        'step 2'
        if(result.bool){
            var target=result.targets[0];
            event.target=target;
            player.logSkill('oljieming',target);
            target.draw(Math.min(3,target.maxHp+1));
        }
        else event.finish();
    },
                        sub:true,
                    },
                    bingsimopai:{
                        trigger:{
                            player:["dying","dyingAfter"],
                        },
                        name:"濒死摸牌",
                        "prompt2":function(event,player){
   if((player.hasSkill('taojiuhui'))) {return '每当你进入或脱离濒死状态，你可以摸一张牌。没有被 刚烈 与 镇卫 折磨吧'};
 if((!player.hasSkill('taojiuhui'))) {return '每当你进入或脱离濒死状态，你可以摸一张牌，脱离濒死状态后，依据舰种获得以下技能：<br>潜艇-断粮（徐晃）、刚烈（夏侯惇）；驱逐-镇卫（文聘）、同疾（袁术）；<br>轻巡-先进雷达；重巡-刚烈（夏侯惇）、界仁德改（刘备）；<br>战列-刚烈（夏侯惇)；航母-英姿（周瑜）'}; },
                        usable:2,
                        fixed:true,
                        content:function(){//兵粮寸断与据守，刚烈，     镇卫同疾吸伤害，国风防锦囊牌。
        //轻巡提升己方防守与攻击距离，粮策全体发牌。  重巡提供免伤。战列刚烈反击。 
        player.draw(1); game.playAudio('..','extension','舰R牌将/audio','bingsimosanpai');trigger.player.addMark('taojiuhui',1)
    if(player.hasSkill('qianting')){player.addSkill('gzduanliang','ganglie')};;
    if(player.hasSkill('quzhudd')){player.addSkill('hzhenwei','retongji')};;
    if(player.hasSkill('qingxuncl')){player.addSkill('xianjinld')};;
    if(player.hasSkill('zhongxunca')){player.addSkill('ganglie',"rendeonly2")};;
    if(player.hasSkill('zhanliebb')){player.addSkill('ganglie')};;
    if(player.hasSkill('hangmucv')){player.addSkill('yingzi')};;
   if(player.hasSkill('junfu')){player.addSkill('qingnang')};;           
                                                    
    },
                        intro:{
                            content:function(){
        return get.translation(skill+'_info');},
                        },
                        sub:true,
                    },
                },
            },
            qianting:{
            },
            zhanliebb:{
                intro:{
                    content:function(){
                return get.translation(skill+'_info');
            },
                },
            },
            qingxuncl:{
                intro:{
                    content:function(){
                return get.translation(skill+'_info');
            },
                },
            },
            zhongxunca:{
            },
            misscoversha:{
                trigger:{
                    player:"shaMiss",
                },
                silent:true,
                filter:function(event){//return event.getParent(2).name=='fupaozu'
        ;
    },
                content:function(){
    player.getStat().card.sha--
    },
                forced:true,
                popup:false,
                ai:{
                    expose:0.3,
                    threaten:8.8,
                    order:5,
                    result:{
                        player:1,
                    },
                },
            },
            roundonefire:{
                audio:"ext:1牌将修改:2",
                trigger:{
                    global:"roundStart",
                },
                "prompt2":function(event,player){
   if((player.hasSkill('hangmucv'))) {return '一轮游戏开始时选择发动，你随机弃置两张牌，视为对非友方角色使用万箭齐发，若你仍有手牌，会再弃置一张手牌，视为对你选择的敌人使用冰杀。没有手牌会结束此技能。能加快战局推进。'};
   if((player.hasSkill('daoqu'))) {return '一轮游戏开始时选择发动，你随机弃置一张牌，视为用冰杀攻击一名你选择的敌人,然后再弃置一张牌使用火杀。没有手牌会结束此技能。能加快战局推进。'};
 if((player.hasSkill('qianting'))) {return '一轮游戏开始时选择发动，你先后随机弃置一张牌，视为用冰杀攻击一名你选择的敌人，视为用雷杀攻击你选择的敌人，没有手牌会结束此技能。能加快战局推进。'};   },
                filter:function(event,player){
    return player.countCards('h')>0;},
                content:function(){'step 0'
event.targets=player.getEnemies();game.playAudio('..','extension','舰R牌将/audio',player.name);
        'step 1'
if(player.countCards('h')>1&&player.hasSkill('hangmucv')){player.discard(player.getCards('h').randomGet())&&player.discard(player.getCards('h').randomGet())&&player.useCard({name:'wanjian'},event.targets)};                                                                   
'step 2'
player.chooseTarget(get.prompt2('在离开战斗前，你还可以令队友、关注的对象摸三张牌，或许会有转机出现'),function(card,player,target){
            return target.maxHp>0&&player.inRange(target);
        }).set('ai',function(target){
            var att=-get.attitude(_status.event.player,target);
            if(target.hasSkill('zhanliebb')|target.hasSkill('zhanliebb')){ att*=1.5};
    if(Math.ceil(target.hp*2)<=target.maxHp){ att*=2};
    if(target.hasSkill('bagua_skill')|target.hasSkill('re_bagua_skill')){ att*=0.5};
             return att
        });
        'step 3'
        if(result.bool){
            var target=result.targets[0];
            event.target=target;
if(player.countCards('h')>0){player.discard(player.getCards('h').randomGet())&&player.useCard({name:'sha',nature:'ice',isCard:true},event.target);};
if(player.countCards('h')>0&&player.hasSkill('qianting')){player.discard(player.getCards('h').randomGet()),player.useCard({name:'sha',nature:'thunder',isCard:true},event.target);}
if(player.countCards('h')>0&&player.hasSkill('daoqu')){player.discard(player.getCards('h').randomGet()),player.useCard({name:'sha',nature:'fire',isCard:true},event.target);}}
else event.finish;




        
    },
                ai:{
                    basic:{
                        order:10,
                    },
                    result:{
                        player:1,
                    },
                },
            },
            xianjinld:{
                global:"xianjinld_difend",
                trigger:{
                    global:"phaseDrawBegin",
                },
                forced:true,
                logTarget:"player",
                filter:function(event,player){
        return event.player!=player&&get.attitude(event.player,player)>0;
    },
                content:function(){trigger.num++//spshicai下面
      },
                mod:{
                    aiOrder:function(player,card,num){
if(get.itemtype(card)=='card'&&card.hasGaintag('xianjinld')) return num+3;
},
                },
                onremove:function(player){
player.removeGaintag('xianjinld');
},
                mark:true,
                intro:{
                    mark:function(dialog,content,player){
if(player!=game.me) return get.translation(player)+'观看牌堆中...'+'增加队友攻击距离，摸牌阶段身份局队友多摸一张牌';
if(get.itemtype(_status.pileTop)!='card') return '牌堆顶无牌';
dialog.add([_status.pileTop]);
},
                },
                subSkill:{
                    difend:{
                        mod:{
                            globalFrom:function(from,to,num){
            return num-game.countPlayer(function(current){
                return current!=from&&get.attitude(current,from)>0&&current.hasSkill('xianjinld');
            });
        },
                        },
                        sub:true,
                    },
                },
            },
            "rendeonly2":{
                audio:"ext:1牌将修改:2",
                audioname:["gz_jun_liubei","shen_caopi"],
                enable:"phaseUse",
                filterCard:true,
                position:"hs",
                selectCard:[1,3],
                discard:false,
                usable:2,
                lose:false,
                delay:false,
                filterTarget:function(card,player,target){
        if(player.storage.rerende2&&player.storage.rerende2.contains(target)) return false;
        return player!=target;
    },
                onremove:["rerende","rerende2"],
                check:function(card){
        if(ui.selected.cards.length&&ui.selected.cards[0].name=='du') return 0;
        if(!ui.selected.cards.length&&card.name=='du') return 20;
        var player=get.owner(card);
        if(ui.selected.cards.length>=Math.max(2,player.countCards('h')-player.hp)) return 0;
        if(player.hp==player.maxHp||player.storage.rerende<0||player.countCards('h')<=1){
            var players=game.filterPlayer();
            for(var i=0;i<players.length;i++){
                if(players[i].hasSkill('haoshi')&&
                    !players[i].isTurnedOver()&&
                    !players[i].hasJudge('lebu')&&
                    get.attitude(player,players[i])>=3&&
                    get.attitude(players[i],player)>=3){
                    return 11-get.value(card);
                }
            }
            if(player.countCards('h')>player.hp) return 10-get.value(card);
            if(player.countCards('h')>2) return 6-get.value(card);
            return -1;
        }
        return 10-get.value(card);
    },
                content:function(){
        'step 0'
        var evt=_status.event.getParent('phaseUse');
        if(evt&&evt.name=='phaseUse'&&!evt.rerende){
            var next=game.createEvent('rerende_clear');
            _status.event.next.remove(next);
            evt.after.push(next);
            evt.rerende=true;
            next.player=player;
            next.setContent(lib.skill.rerende1.content);
        }
        if(!Array.isArray(player.storage.rerende2)){
            player.storage.rerende2=[];
        }
        player.storage.rerende2.push(target);
        target.gain(cards,player,'giveAuto');
        if(typeof player.storage.rerende!='number'){
            player.storage.rerende=0;
        }
        if(player.storage.rerende>=0){
            player.storage.rerende+=cards.length;
            if(player.storage.rerende>=2){
                var list=[];
                if(lib.filter.cardUsable({name:'sha'},player,event.getParent('chooseToUse'))&&game.hasPlayer(function(current){
                    return player.canUse('sha',current);
                })){
                    list.push(['基本','','sha']);
                }
                for(var i of lib.inpile_nature){
                 if(lib.filter.cardUsable({name:'sha',nature:i},player,event.getParent('chooseToUse'))&&game.hasPlayer(function(current){
                            return player.canUse({name:'sha',nature:i},current);
                        })){
                        list.push(['基本','','sha',i]);
                    }
                }
          //      if(lib.filter.cardUsable({name:'tao'},player,event.getParent('chooseToUse'))&&game.hasPlayer(function(current){
      //              return player.canUse('tao',current);
           //     })){
        //            list.push(['基本','','tao']);
      //          }
                if(lib.filter.cardUsable({name:'jiu'},player,event.getParent('chooseToUse'))&&game.hasPlayer(function(current){
                    return player.canUse('jiu',current);
                })){
                    list.push(['基本','','jiu']);
                }
                if(list.length){
                    player.chooseButton(['是否视为使用一张基本牌？',[list,'vcard']]).set('ai',function(button){
                        var player=_status.event.player;
                        var card={name:button.link[2],nature:button.link[3]};
                        if(card.name=='tao'){
                            if(player.hp==1||(player.hp==2&&!player.hasShan())||player.needsToDiscard()){
                                return 5;
                            }
                            return 1;
                        }
                        if(card.name=='sha'){
                            if(game.hasPlayer(function(current){
                                return player.canUse(card,current)&&get.effect(current,card,player,player)>0
                            })){
                                if(card.nature=='fire') return 2.95;
                                if(card.nature=='thunder'||card.nature=='ice') return 2.92;
                                return 2.9;
                            }
                            return 0;
                        }
                        if(card.name=='jiu'){
                            return 0.5;
                        }
                        return 0;
                    });
                }
                else{
                    event.finish();
                }
                player.storage.rerende=-1;
            }
            else{
                event.finish();
            }
        }
        else{
            event.finish();
        }
        'step 1'
        if(result&&result.bool&&result.links[0]){
            var card={name:result.links[0][2],nature:result.links[0][3]};
            player.chooseUseTarget(card,true);
        }
    },
                ai:{
                    fireAttack:true,
                    order:function(skill,player){
            if(player.hp<player.maxHp&&player.storage.rerende<2&&player.countCards('h')>1){
                return 6;
            }
            return 3;
        },
                    result:{
                        target:function(player,target){
                if(target.hasSkillTag('nogain')) return 0;
                if(ui.selected.cards.length&&ui.selected.cards[0].name=='du'){
                    if(target.hasSkillTag('nodu')) return 0;
                    return -10;
                }
                if(target.hasJudge('lebu')) return 0;
                var nh=target.countCards('h');
                var np=player.countCards('h');
                if(player.hp==player.maxHp||player.storage.rerende<0||player.countCards('h')<=1){
                    if(nh>=np-1&&np<=player.hp&&!target.hasSkill('haoshi')) return 0;
                }
                return Math.max(1,5-nh);
            },
                    },
                    effect:{
                        target:function(card,player,target){
                if(player==target&&get.type(card)=='equip'){
                    if(player.countCards('e',{subtype:get.subtype(card)})){
                        if(game.hasPlayer(function(current){
                            return current!=player&&get.attitude(player,current)>0;
                        })){
                            return 0;
                        }
                    }
                }
            },
                    },
                    threaten:0.8,
                },
            },
            diewulimitai:{
                enable:"phaseUse",
                filter:function(event,player){
      return player.countCards('h','sha')>0;
    },
                filterCard:{
                    name:"sha",
                },
                filterTarget:function(card,player,target){
      if(get.attitude(player,target)>0)  return target!=player;
    },
                selectCard:[1,3],
                prepare:"give",
                discard:false,
                content:function(){
        target.gain(cards,player);
        if(!player.hasSkill('diewulimitai_2')){
            player.draw();
            player.addTempSkill('diewulimitai_2');
        }
    },
                subSkill:{
                    "2":{
                        intro:{
                            marktext:"给了杀",
                            content:function(player){
            return ('一个标记，应用了subSkill而想设置这段话');
        },
                        },
                        sub:true,
                    },
                },
                ai:{
                    order:function(skill,player){
            if(player.countCards('h','nanman')>1){
                return 10;
            }
            return 3;
         },
                    expose:0,
                    result:{
                        target:function(player,target){　var e1=target.get('e','1');
　　if(e1){
　　if((e1.name=='zhuge')|(e1.name=='rewrite_zhuge')) return 1;
　　if(e1.name=='guanshi') return 1;};
   if((target.hasSkill('qigong')|target.hasSkill('guanshi_skill')))  return 2;   return player.countCards('h','sha')>0;
            },
                    },
                },
            },
            foundtrick:{
                trigger:{
                    source:"damageBegin",
                },
                forced:true,
                usable:1,
                filter:function(event){
        return event.card&&get.type(event.card)=='trick'&&event.parent.name!='_lianhuan'&&event.parent.name!='_lianhuan2';
    },
                content:function(){game.log('要锦囊牌加伤了')
        trigger.num+=(player.countMark('atkup'));
    },
                group:["foundtrick_discover","foundtrick_draw"],
                ai:{
                    threaten:0,
                },
                subSkill:{
                    discover:{
                        trigger:{
                            player:"phaseUseBegin",
                        },
                        forced:true,
                        content:function(){game.log('要摸锦囊牌了')
                player.discoverCard(get.inpile('trick'));
            },
                        sub:true,
                    },
                    draw:{
                        trigger:{
                            player:"phaseDrawBegin",
                        },
                        content:function(){game.log('要少摸牌了')
                trigger.num+=(-1);
            },
                        sub:true,
                        forced:true,
                        popup:false,
                    },
                },
            },
            kanpolimitai:{
                enable:"chooseToUse",
                locked:false,
                usable:1,
                fullskin:true,
                filterCard:function(card){
        return get.color(card)=='black';
    },
                viewAsFilter:function(player){
        return player.countCards('hs',{color:'black'})>0;
    },
                viewAs:{
                    name:"wuxie",
                },
                position:"hs",
                prompt:"将一张黑色手牌当无懈可击使用",
                check:function(card){
        var tri=_status.event.getTrigger();
        if(tri&&tri.card&&tri.card.name=='chiling') return -1;
        return 8-get.value(card)
    },
                threaten:1.2,
                ai:{
                    basic:{
                        useful:[6,4,3],
                        value:[6,4,3],
                    },
                    result:{
                        player:1,
                    },
                    expose:0.2,
                },
            },
            fangkoganning:{
                audio:"ext:舰R牌将:1",
                fullskin:true,
                audioname:["yixian","sunce","re_sunben","re_sunce","ol_sunjian"],
                unique:true,
                usable:1,
                round:1,
                nodelay:true,
                trigger:{
                    global:"useCardToPlayered",
                },
                filter:function(event,player){
        if(event.getParent().triggeredTargets3.length>1) return false;
        if(get.type(event.card)!='trick') return false;
        if(get.info(event.card).multitarget) return false;
        if(event.targets.length<1) return false;
        if(game.hasPlayer(function(current){
                            return current!=player&&get.attitude(player,current)>-1;
                        })){
                            return 1;
                        }
    //    if(player.storage.fangkoganning) return false;
        return true;
    },
                direct:true,
                content:function(){//limited:true,
        "step 0"
        player.chooseTarget(get.prompt('防空保护对象'),('X为选择的角色数，当一名角色使用的锦囊牌指定了至少两名角色为目标时，你可以消耗2X的手牌，令此牌对X名角色无效。'),
       [1,Math.min(trigger.targets.length,Math.floor(player.countCards('he')/2))],function(card,player,target){
       return _status.event.targets.contains(target);
        }).set('ai',function(target){
       var trigger=_status.event.getTrigger();
    //      if(game.phaseNumber>game.players.length&&trigger.targets.length>=game.players.length-1&&!trigger.excluded.contains(target))  {
        return -get.effect(target,trigger.card,trigger.player,_status.event.player);
   //        }
            return -1;
        }).set('targets',trigger.targets);
        "step 1"
        if(result.bool){
        var num=result.targets.length*2;event.target=result.targets//event的赋值不需要var 可以一直使用的事件结束
        var discard=player.countCards('he');
        var next=player.chooseToDiscard(get.prompt('防空弃牌事件'),num,'弃置两倍的手牌并让锦囊牌对目标角色无效');
        next.setHiddenSkill('fangkoganning');//还要隐藏还行skillAnimation:true,    animationColor:"wood",
        next.ai=function(card){
            if(discard){
                return 100-get.useful(card);
            }
            else{
                return -1;
            }
     }   };
        "step 2"
        if(result.bool){//trigger.getParent()找上个事件（万箭齐发）//     getStat是操作次数的，skillCount是获取次数的，相当于一个get一个set，prompt里面应该是不能去set
          //  出现觉醒标识的player.awakenSkill('防空');与拖时间播录音的game.delay();以及真正完成觉醒技只能用一次的player.storage.fenwei=true;
            player.logSkill('fangkoganning',result.targets);
           // player.storage.fangkoganning=true;
            trigger.getParent().excluded.addArray(event.target);
            event.finish;
        }
    },
                group:["fangkoganning_roundcount"],
            },
            kaifa:{
                position:"he",
                audio:"xinfu_jingxie",
                enable:"phaseUse",
                filter:function(event,player){//group:["xinfu_jingxie2"],
        var he=player.getCards('he');
        for(var i=0;i<he.length;i++){
            if(["bagua","baiyin","lanyinjia","renwang","tengjia","zhuge"].contains(he[i].name)) return true;
        }
        return false;
    },
                filterCard:function(card){
        return ["bagua","baiyin","lanyinjia","renwang","tengjia","zhuge"].contains(card.name);
    },
                discard:false,
                lose:false,
                delay:false,
                check:function(){
        return 1;
    },
                content:function(){
        "step 0"
        player.showCards(cards);
        "step 1"
        var card=cards[0];
        var bool=(get.position(card)=='e');
        if(bool) player.removeEquipTrigger(card);
        game.addVideo('skill',player,['xinfu_jingxie',[bool,get.cardInfo(card)]])
        game.broadcastAll(function(card){
            card.init([card.suit,card.number,'rewrite_'+card.name]);
        },card);
        if(bool){
            var info=get.info(card);
            if(info.skills){
                for(var i=0;i<info.skills.length;i++){
                    player.addSkillTrigger(info.skills[i]);
                }
            }
        }
    },
                ai:{
                    basic:{
                        order:10,
                    },
                    result:{
                        player:1,
                    },
                },
                intro:{
                    content:function(){
            return get.translation(skill+'_info');
        },
                },
                "audioname2":{
                    "key_shiki":"shiki_omusubi",
                },
            },
            huijiahuihe:{
                trigger:{
                    player:"phaseEnd",
                },
                round:1,
                name:"回合",
                filter:function(event,player){
        return player.hujia>0;
    },
                check:function(event,player){
        return player.hujia>0&&player.hp>0;
    },
                content:function(){
        player.storage.huijiahuihe=player.hujia;
        player.changeHujia(-player.hujia);
        player.insertPhase();
    },
                group:["huijiahuihe_hp","huijiahuihe_draw","huijiahuihe_roundcount"],
                subSkill:{
                    hp:{
                        trigger:{
                            player:"phaseAfter",
                        },
                        silent:true,
                        filter:function(event,player){
                return event.skill=='huijiahuihe'&&!player.getStat('damage');
            },
                        content:function(){game.log('没输出还是来抽张牌吧')
                player.draw();
            },
                        sub:true,
                        forced:true,
                        popup:false,
                    },
                    draw:{
                        trigger:{
                            player:"phaseDrawBegin",
                        },
                        filter:function(event){
                return event.getParent('phase').skill=='huijiahuihe';
            },
                        silent:true,
                        content:function(){game.log('要少摸牌了')
                trigger.num-=(2-player.storage.huijiahuihe);
            },
                        sub:true,
                        forced:true,
                        popup:false,
                    },
                },
            },
            touxichuan:{
                audio:"ext:舰R牌将:2",
                audioname:["re_ganning","re_heqi"],
                enable:"chooseToUse",
                ueable:3,
                filterCard:function(card,player){return get.color(card)=='red'},
                position:"hes",
                viewAs:{
                    name:"guohe",
                },
                viewAsFilter:function(player){
        if(!player.countCards('hes',{color:'red'})) return false;
    },
                check:function(card){return 6-get.value(card)},
                prompt:"每回合限三次，弃置一张红色牌，弃置对手一张手牌或者装备牌，并为对手施加进水debuff。",
                content:function(){
            player.logSkill('touxichuan',target);game.log('要进水弃牌了')
            target.addSkill('wulidebuff_jinshui');
},
                ai:{
                    basic:{
                        order:9,
                        useful:5,
                        value:5,
                    },
                    yingbian:function(card,player,targets,viewer){
            if(get.attitude(viewer,player)<=0) return 0;
            if(game.hasPlayer(function(current){
                return !targets.contains(current)&&lib.filter.targetEnabled2(card,player,current)&&get.effect(current,card,player,player)>0;
            })) return 6;
            return 0;
        },
                    result:{
                        target:function(player,target){
                var att=get.attitude(player,target);
                var nh=target.countCards('h');
                if(att>0){
                    if(target.countCards('j',function(card){
                        var cardj=card.viewAs?{name:card.viewAs}:card;
                        return get.effect(target,cardj,target,player)<0;
                    })>0) return 3;
                    if(target.getEquip('baiyin')&&target.isDamaged()&&
                        get.recoverEffect(target,player,player)>0){
                        if(target.hp==1&&!target.hujia) return 1.6;
                    }
                    if(target.countCards('e',function(card){
                        if(get.position(card)=='e') return get.value(card,target)<0;
                    })>0) return 1;
                }
                var es=target.getCards('e');
                var noe=(es.length==0||target.hasSkillTag('noe'));
                var noe2=(es.filter(function(esx){
                    return get.value(esx,target)>0;
                }).length==0);
                var noh=(nh==0||target.hasSkillTag('noh'));
                if(noh&&(noe||noe2)) return 0;
                if(att<=0&&!target.countCards('he')) return 1.5;
                return -1.5;
            },
                    },
                    tag:{
                        loseCard:1,
                        discard:1,
                    },
                },
                intro:{
                    content:function(){
            return get.translation(skill+'_info');
        },
                },
            },
            wulidebuff:{
                trigger:{
                    source:"damageBefore",
                },
                name:"火杀燃烧",
                forced:true,
                filter:function(event,player){//usable:1,
    //trigger…（什么人的什么阶段让技能拥有者触发技能，伤害damage阶段与使用一张卡牌usecard阶段是在阶段内计算结果的哦）
    //trigger里一般有player：…（有技能的到阶段就发）/target：…被对面瞄准后到阶段就放/source：…伤害来源有这个技能的到…阶段就放 
    //global进入一些特殊阶段会让有技能的触发此技能（配合player缩小触发范围，实现全回合技能使用者摸牌）这几种，
    //当是player:'阶段'时，可用trigger.player指技能拥有者（player），当是target:'阶段'时，trigger.target是技能拥有者
    //但trigger.player变为指定技能拥有者为目标的人，当source:'阶段'时，trigger.player是技能拥有者指定的目标
        if((event.nature&&player!=event.player))
    //只有在filter才可以判断卡牌目标、伤害的种类、受伤的人，在伤害发生后这些判断不能在content使用。source、target也是
    //虽然不能在content使用source，但可以用全新的trigger.player表示被这个技能作用的人，player仍然指使用这个技能的人，
    //trigger.num仍然能指代阶段数，event.num仍然能代替abcd这些赋值的文字使用。game.log仍然能帮你查错。
    //trigger.num+=(1)是函数增伤的写法，num++是简写。
    return true},
                content:function(){//火杀先增加伤害次数，再考虑其他，比如负面效果。log用了翻译代码把武将名切换为中文，trigger.player.damage(1,'fire');可以无线触发这个技能哦。
    //而且content里面event要变成trigger,如event.num变为trigger.num。代码玄学风
   if(trigger.nature=='fire')  {if(player.hasSkill('zhongxunca')&&trigger.player.hasMark('gaizhaoup')&&trigger.player.hasSkill('quzhudd')|trigger.player.hasSkill('qingxuncl')) {trigger.player.damage(player.countMark('atkup'));game.log('重巡克制改造驱逐伤害:',1);}else
  //   trigger.num+=(player.countMark('atkup'));
      {trigger.player.addSkill('wulidebuff_ranshao');trigger.player.addMark('wulidebuff_ranshao',1);
     game.log(get.translation(player.name)+'<span class=firetext>燃烧</span>'+get.translation(trigger.player.name)+'<span class=thundertext>,ta还能坚持一出牌回合');};
     game.log(trigger.nature,'是是是火');if(trigger.player.hp*2<trigger.player.maxHp){player.$throwEmotion(trigger.player,'yanhua')};  
        game.playAudio('..','extension','舰R牌将/audio','wulidebuff');};     
     if(trigger.nature=='thunder')  {if((player.hasSkill('quzhudd')|player.hasSkill('qianting'))&&trigger.player.hasMark('gaizhaoup')&&(trigger.player.hasSkill('zhanliebb')|trigger.player.hasSkill('hangmucv'))){trigger.player.loseHp(1);game.log('鱼雷的穿透增伤:',1)};
   trigger.player.addSkill('wulidebuff_jiansu');trigger.player.addMark('wulidebuff_jiansu',1);//  trigger.num+=(player.countMark('atkup'));
 if(trigger.player.hujia>0&&!trigger.player.isLinked()){ trigger.player.loseHp(trigger.num);game.log('雷杀穿透护甲:',trigger.num);trigger.num+=(-trigger.num),trigger.cancel};
 game.log(get.translation(player.name)+'<span class=thundertext>减速了:</span>'+get.translation(trigger.player.name)+'小心随之而来的集火');
 game.log(trigger.nature,'是是是雷',get.translation('wulidebuff_jiansu')); if(trigger.player.hp*2<trigger.player.maxHp){player.$throwEmotion(trigger.player,'hehua')};    };      
    if(trigger.nature=='ice')  {trigger.player.addSkill('wulidebuff_jinshui');trigger.player.addMark('wulidebuff_jinshui');//trigger.num+=(player.countMark('atkup'));
    if(player.hasSkill('zhanliebb')&&trigger.player.hasMark('gaizhaoup')&&trigger.player.hasSkill('zhongxunca')){trigger.player.damage(player.countMark('atkup'));game.log('改造重巡被击穿'+1)} ;
    if(trigger.player.hujia>0) {trigger.player.damage(1) ;game.log('对护甲加伤'+1)};
    game.log(get.translation(player.name)+'让:'+get.translation(trigger.player.name)+'进水减手牌上限了') ; if(trigger.player.hp*2<trigger.player.maxHp){player.$throwEmotion(trigger.player,'wine')};   game.log(trigger.nature,'是是是冰',get.translation('wulidebuff_jinshui'));                                                                                                         
    }
    },
                subSkill:{
                    jiansu:{
                        mod:{
                            globalTo:function(from,to,distance){return distance-to.hasMark('wulidebuff_jiansu');},
                        },
                        trigger:{
                            player:"phaseJieshuBegin",
                        },
                        name:"减速",
                        frequent:true,
                        content:function(){
        if(player.hasSkill('wulidebuff_jiansu')){; player.removeSkill('wulidebuff_jiansu',player.countMark('wulidebuff_jiansu')); };
    },
                        intro:{
                            marktext:"减速",
                            content:function(player){
            return ('wulidebuff_jiansu'+'减少1点与其他角色的防御距离，令舰船更容易被对手集火，雷杀的效果，不叠加计算');
        },
                        },
                        sub:true,
                    },
                    jinshui:{
                        mod:{
                            maxHandcard:function(player,num){//手牌上限，这个好理解，num是这个函数原本输出的数量，num=num加数字就可以变更了。
        return num=num-1},
                        },
                        trigger:{
                            player:"phaseBegin",
                        },
                        name:"进水",
                        frequent:true,
                        content:function(){
        if(player.hasSkill('wulidebuff_jinshui')){; player.removeSkill('wulidebuff_jinshui',player.countMark('wulidebuff_jinshui')); };
    },
                        intro:{
                            marktext:"进水",
                            content:function(player){
            return ('减少1点手牌上限，在出牌阶段会恢复，冰杀与袭击运输船的效果，不叠加计算也很可怕了');   
            },
                        },
                        sub:true,
                    },
                    ranshao:{
                        trigger:{
                            player:"phaseJieshuBegin",
                        },
                        name:"燃烧",
                        frequent:true,
                        content:function(){//player.countMark('wulidebuff_ranshao'),唯一一个加伤的，还是给牌吧。
        if(player.hasSkill('wulidebuff_ranshao')){player.draw(1);player.damage(1,'fire'); player.removeSkill('wulidebuff_ranshao');player.removeMark('wulidebuff_ranshao',1) };  },
                        intro:{
                            marktext:"燃烧",
                            content:function(player){
            return ('回合结束受到一点火焰伤害，摸一张牌，火杀带来的负面效果');  },
                        },
                        sub:true,
                    },
                },
            },
            junfu:{
                audio:"ext:舰R牌将:2",
                trigger:{
                    player:"phaseJieshuBegin",
                    global:"phaseBegin",
                },
                direct:true,
                frequent:true,
                preHidden:true,
                locked:false,
                filter:function(event,player){//输粮改
    return player.getExpansions('tunchu').length>0&&event.player.countCards('h')<11&&event.player.isAlive();  },
                content:function(){
        'step 0'
        var goon=(get.attitude(player,trigger.player)>0);
        player.chooseCardButton(get.prompt('junfu',trigger.player),player.getExpansions('tunchu')).set('ai',function(){
            if(_status.event.goon) return 1;
            return 1;
        }).set('goon',goon);
        'step 1'
        if(result.bool){
            player.logSkill('shuliang',trigger.player);
       //     player.loseToDiscardpile(result.links);trigger.player.draw(1)
            player.discoverCard(get.inpile('trick'));trigger.player.gain(result.links,player);}
    },
                ai:{
                    combo:"tunchu",
                },
                group:["junfu_choose","junfu_draw"],
                onremove:function(player,skill){
        var cards=player.getExpansions(skill);
        if(cards.length) player.loseToDiscardpile(cards);
    },
                intro:{
                    content:"expansion",
                    markcount:"expansion",
                },
                subSkill:{
                    choose:{
                        trigger:{
                            global:"phaseBegin",
                        },
                        forced:true,
                        popup:false,
                        filter:function(event,player){//输粮改
        return !player.getExpansions('tunchu').length;
    },
                        charlotte:true,
                        content:function(){
        'step 0'
     //   player.removeSkill('tunchu_choose');
        var nh=player.countCards('h');
        if(nh){
            player.chooseCard('h',[1,nh],'将任意张手牌置于你的武将牌上').set('ai',function(card){
                var player=_status.event.player;
                var count=game.countPlayer(function(current){
                    return get.attitude(player,current)>0;//current.countCards('h')current.hp+1
                });
                if(ui.selected.cards.length>=count) return -get.value(card);
                return 25-get.value(card);
                if(ui.selected.cards.type=="equip") return -get.value(card);
            });
        }
        else{
            event.finish();
        }
        'step 1'
        if(result.bool){
            player.addToExpansion(result.cards,player,'giveAuto').gaintag.add('tunchu');
        }
    },
                        sub:true,
                    },
                    draw:{
                        trigger:{
                            player:"phaseDrawBegin2",
                        },
                        frequent:true,
                        preHidden:true,
                        locked:false,
                        filter:function(event,player){//"粮油运输","屯粮油","仓储","qingnang"
    return true;
    },
                        content:function(){
        trigger.num-=2;
},
                        sub:true,
                    },
                },
            },
            quzhudd:{
                mod:{
                    globalFrom:function(from,to,distance)  { return distance-(to.hasSkill('qianting'));},
                },
                group:[],
                ai:{
                    expose:0,
                    threaten:4.8,
                    order:5,
                    result:{
                        player:1,
                    },
                },
                intro:{
                    content:function(){
            return get.translation(skill);
        },
                },
            },
            subforceequip:{
            },
            daoqu:{
            },
        },
        translate:{
            tiaozhanzhuanbei:"手枪",
            "tiaozhanzhuanbei_info":"挑战锁定技，游戏开始时，你将一张【幸运】【炮火准备】和一张【望远镜】置入你的装备区。你装备区内的武器牌和宝物牌不能被其他角色弃置。",
            danzong:"弹种切换",
            "danzong_info":"每回合限两次，使用杀时：<br>没舰种时：切为高爆弹，令非属性杀获得火属性。<br>潜艇、驱逐、轻巡：发射鱼(雷)，令非属性杀获得雷属性及无视防具的效果<br>战列、航母：使用穿甲弹,令非属性杀获得冰属性。<br>使用杀时限一次，效果持续到伤害结算完成时",
            huihejieshu:"回合结束",
            "huihejieshu_info":"移除所有进水、减速、燃烧、摸牌标记",
            qianghuachuan:"强化舰船",
            "qianghuachuan_info":"每回合限两次，弃置一张装备牌,强化舰船的攻击距离、攻击次数、响应摸牌和防御距离四个属性，在生效三次升级后无法继续强化。(用装备换长久利益，强化2次后可以通过改造增加血量上限与强化上限哦)<span class=thundertext>0</span>，<span class=firetext>0</span>，<span class=greentext>0</span>，<span class=yellowtext>0</span>",
            gaizaochuan:"改造",
            "gaizaochuan_info":"当此角色强化了两次以后或者处于濒死时，你可弃三张同花色的牌，提升两点血量上限，回复两点体力,重复改造只会回血。</br>注意,改造舰船将令此舰船受到舰种间属性杀增伤的影响，但高血量会让自己过牌与存牌的能力强很多。",
            "paohuozb_skill":"炮火准备1",
            "paohuozb_skill_info":"e",
            fupaozu:"副炮",
            "fupaozu_info":"在没有杀或者不能出杀时，可弃置最多五张同花牌，耗n-2滴血，n为弃牌数,对你选择的目标视为出n-1个杀，<br>弃置达到（4，5）时使用的杀拥有属性杀，极限4发，回复出杀次数会生效,技能结束后会获得袭击运输船技能",
            zhuangjiafh:"装甲防护",
            "zhuangjiafh_info":"受伤后,若你没有护甲，可以弃置一张黑色牌获得1点护甲，hujiahuode现在只消耗手牌了",
            hangmucv:"航母",
            "hangmucv_info":"受伤时手牌上限+1，出杀次数+1。血量一般的舰船，能在每一轮开始时攻击三次，在优秀的队友帮助下避开抽卡高峰期发挥火力,但过牌少，没有强制命中，对阵多个轻型单位时很弱。死而复生后获得青囊和胆守回复状态。",
            yuanhang:"远航",
            "yuanhang_info":"最后的幸运，摸牌技能每个回合各限2次：<br>当手牌数下降至手牌上限/2+1后，若你没有摸牌标记，你摸1+x张牌，然后获得远航摸牌标记；否则只摸一张牌。若本轮没有使用此技能，会在回合结束后摸一张牌；可在强化中提升X值。<br>可以为身份局态度好的队友递杀，受伤时出杀次数与手牌上限+1，进入、脱离濒死时，你摸一张牌；死亡后，令一名角色摸三张牌。<br>",
            qianting:"潜艇",
            "qianting_info":"手牌上限+3，受伤时出杀次数+1，攻击距离不变，锦囊距离+1。可以拿对手牌，给队友牌。手短没防具，还得依赖火攻输出，非常容易去世。改造后增加锦囊牌伤害1点，濒死复生后获得截粮减少对手过牌量，复活后选择一项获得：八阵、看破和火攻。",
            zhanliebb:"战列舰",
            "zhanliebb_info":"受伤时手牌上限+1，出杀次数+1。受伤后可用黑色牌得护甲，回血也加护甲，可以弃置n张红色手牌杀指定目标n-1次，但减速后会被对手集火，需要队友给牌给桃，濒死复生后获得刚烈以减轻承伤压力。",
            qingxuncl:"轻巡洋舰",
            "qingxuncl_info":"手牌上限+2，受伤时出杀次数+1。利用手牌能力优秀的辅助舰船，有八卦省牌，青囊回血，奋威防御多目标锦囊牌，为队友保驾护航。缺点是没输出技能，会被暴打。濒死复生后，增加身份局队友摸牌，减少队友攻击所需距离",
            zhongxunca:"重巡洋舰",
            "zhongxunca_info":"受伤时手牌上限+1，出杀次数+1。可用黑色牌得护甲，让杀点燃对手，持续消耗对手的血量。可以弃置n张红色手牌杀指定目标n-1次，但怕被减速导致的集火暴打。濒死复生后获得刚烈以减轻承伤压力，以及仁德回血。",
            misscoversha:"回复出杀上限",
            "misscoversha_info":"杀被回避会回复当回合出杀次数",
            roundonefire:"先制攻击",
            "roundonefire_info":"一轮游戏开始时选择发动，你根据舰种随机弃置手牌，视为对全模式非友方角色使用万箭齐发，或者对一个目标使用冰杀、雷杀。没有手牌会结束此技能。能加快战局推进的技能。",
            xianjinld:"先进雷达",
            "xianjinld_info":"增加队友攻击距离，摸牌阶段身份局友军多摸一张牌。",
            "rendeonly2":"仁德界改",
            "rendeonly2_info":"给队友最多三张牌，一回合限2次，给出第二张牌时，你视为使用一张基本牌",
            diewulimitai:"递杀蝶舞",
            "diewulimitai_info":"给身份局队友杀,首次给牌自己摸一张",
            foundtrick:"开局摸锦囊",
            "foundtrick_info":"技能名为魔王的技能，锦囊牌伤害加1（如果已经改造完成）和摸一张锦囊牌",
            kanpolimitai:"制空权",
            "kanpolimitai_info":"看破弱化版，将一张黑色手牌当无懈可击使用，每回合限一次。",
            fangkoganning:"防空",
            "fangkoganning_info":"X为选择的角色数，当一名角色使用的锦囊牌指定了至少两名角色为目标时，你可以消耗2X的手牌，令此牌对X名角色无效。",
            kaifa:"开发装备",
            "kaifa_info":"出牌阶段，你可以展示一张未强化过的【诸葛连弩】或标准包/军争包/SP包中的防具牌，然后对其进行强化。当你处于濒死状态时，你可以重铸一张防具牌，然后将体力回复至1点。",
            huijiahuihe:"额外回合",
            "huijiahuihe_info":"祭祀：有护盾就能进行额外回合；发动后重置回合限制技能；额外回合的摸牌数等于护甲数。",
            touxichuan:"袭击运输船",
            "touxichuan_info":"每回合限三次，弃置一张红色牌，弃置对手一张手牌或者装备牌，并为对手施加进水debuff。",
            wulidebuff:"火杀燃烧",
            "wulidebuff_info":"火杀：令目标回合结束受到一点火焰伤害，摸一张牌，重巡火杀打改造驱逐加1伤。</br>冰杀：护甲加1伤；减少对手1点防御距离，方便队友集火对手；战列冰杀打改造重巡加1伤害。</br>雷杀：有护甲时穿透护甲；减少对手1点手牌上限；潜艇、驱逐雷杀改造战列、航母时加1伤害。",
            junfu:"军辅船",
            "junfu_info":"没有摸牌阶段，手牌上限+3，受伤时出杀+1。可以给其他人送牌，濒死给青囊技能<br>其他人回合开始时，若你没有粮，你可以把手牌存于武将牌上，称为粮。计谋粮可以在自己或其他人的回合结束后给ta，令你发现一张锦囊牌，让对手获得计谋粮。开局运气不行的时候，也许把牌全存起来是个好主意，甚至给对手递牌也行。",
            quzhudd:"驱逐舰",
            "quzhudd_info":"手牌上限+2，受伤时出杀+1。可以给其他人送牌。闪避拉满，给队友牌狠，自己单干也狠，适合与驱逐队友配合，创造秒杀对面的时机。濒死但被救活后，能把对手的杀从队友传给自己。",
            subforceequip:"武器技能合集",
            "subforceequip_info":"双刃_当你的武器牌被替换时，你可以将其置于你的武将牌上，并获得此装备的武器效果（不含距离），仙剑奇侠传角色包雪见的技能",
            daoqu:"导驱",
            "daoqu_info":"开幕攻击的第一杀为冰杀，第二杀为火杀。",
        },
    },
    intro:"",
    author:"Aurora",
    diskURL:"",
    forumURL:"",
    version:"",
},files:{"character":["changchun.jpg"],"card":[],"skill":[]}}})